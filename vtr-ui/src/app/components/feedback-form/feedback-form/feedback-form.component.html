<button
	mat-dialog-close
	class="position-relative float-right closeButton"
	id="feedback-modal-btn-close"
	aria-label="{{'common.ui.close' | translate}}"
	(click)="closeModal()"
	vtrMetrics
	metricsItem="btn.close"
	metricsEvent="FeatureClick"
	metricsParent="Dialog.Feedback"
>
	<fa-icon [icon]="['fas', 'times']"></fa-icon>
</button>
<div class="vtr-feedback-form"
	id="feedback-form-dialog">
	<div class="content">
		<h2 class="title"
			id="feedback-dialog-basic-title">{{ 'dashboard.feedback.title' | translate }}</h2>
		<form name="feedBack"
			class="feedback-form"
			[formGroup]="feedbackForm"
			novalidate>
			<div class="qa-item"
				*ngFor="let qa of questions">
				<div class="question"
					[dir]="'dir' | translate"
					[innerHTML]="qa.question | translate"
					[id]="qa.name"
					role="text"></div>
				<div class="form-check form-check-inline"
					*ngIf="qa.idYes">
					<input class="form-check-input"
						type="radio"
						[name]="qa.name"
						[id]="qa.idYes"
						[tabindex]="feedbackSuccess ? -1 : 0"
						(click)="setRadioStatus(qa.name, true)"
						(keydown.enter)="setRadioStatus(qa.name, true)"
						[checked]="feedbackForm.value[qa.name] === true"
						[value]="true">
					<label class="form-check-label-out"></label>
					<label class="form-check-label"
						[id]="qa.idYes + '-label'"
						role="text"
						[for]="qa.idYes">{{'dashboard.feedback.form.yes' | translate}}</label>
				</div>
				<div class="form-check form-check-inline"
					*ngIf="qa.idNo">
					<input class="form-check-input"
						type="radio"
						[name]="qa.name"
						[id]="qa.idNo"
						[tabindex]="feedbackSuccess ? -1 : 0"
						(click)="setRadioStatus(qa.name, false)"
						(keydown.enter)="setRadioStatus(qa.name, false)"
						[checked]="feedbackForm.value[qa.name] === false"
						[value]="false">
					<label class="form-check-label-out"></label>
					<label class="form-check-label"
						[id]="qa.idNo + '-label'"
						role="text"
						[for]="qa.idNo">{{'dashboard.feedback.form.no' | translate}}</label>
				</div>
				<div class="likely-content"
					*ngIf="qa.likelyValues">
					<div class="form-check form-check-inline"
						*ngFor="let likely of qa.likelyValues">
						<input class="form-check-input"
							type="radio"
							[name]="qa.name"
							[id]="'feedback-likely-' + likely"
							[tabindex]="feedbackSuccess ? -1 : 0"
							(click)="setLikelyStatus(qa.name, likely)"
							(keydown.enter)="setLikelyStatus(qa.name, likely)"
							[checked]="feedbackForm.value[qa.name] === likely"
							[value]="likely">
						<label class="form-check-label-out"></label>
						<label class="form-check-label"
							[id]="'feedback-form-likely-' + likely"
							role="text"
							[for]="'feedback-likely-' + likely">{{ likely }}</label>
					</div>
					<div class="w-100 mb-1"></div>
					<div class="likely-text"
						id="feedback-not-at-all-likely"
						role="text">{{ 'dashboard.feedback.form.notAtAllLikely' | translate }}</div>
					<div class="likely-text text-right"
						id="feedback-extremely-likely"
						role="text">{{ 'dashboard.feedback.form.extremelyLikely' | translate }}</div>
				</div>
			</div>
			<div class="row">
				<div class="col">
					<div class="comment-tip"
						id="feedback-form-additional-comments"
						role="text">
						{{'dashboard.feedback.form.tips2' | translate}}:
					</div>
					<textarea #feedbackComment
						placeholder="{{'dashboard.feedback.form.comments' | translate}}"
						class="form-control user-comment mb-1"
						id="feedback-form-comments-input"
						[attr.aria-label]="feedbackForm.value.userComment ? feedbackForm.value.userComment : 'dashboard.feedback.form.comments' | translate"
						cols="30"
						rows="10"
						maxlength="1000"
						[tabindex]="feedbackSuccess ? -1 : 0"
						formControlName="userComment"
						pattern="^(?!\s*$).+"
						required></textarea>
					<div class="w-100 text-right comment-count"
						id="feedback-comment-count"
						role="text">{{feedbackComment.value.length}}/1000</div>
				</div>
			</div>
			<div class="row qa-item"
				*ngIf="showEmailField">
				<div class="question"
					id="feedback-form-userEmail"
					role="text">
					{{'dashboard.feedback.form.emailAddressLabel' | translate}}
				</div>
				<input id="feedback-form-email-address-input"
					[attr.aria-label]="feedbackForm.value.userEmail ? feedbackForm.value.userEmail : 'dashboard.feedback.form.emailAddress' | translate"
					[tabindex]="feedbackSuccess ? -1 : 0"
					class="user-email w-100"
					[ngClass]="[(feedbackForm.value.userEmail && feedbackForm.get('userEmail').invalid && isSubmitted) ? 'invalid-email': '']"
					type="text"
					formControlName="userEmail"
					placeholder="{{'dashboard.feedback.form.emailAddress' | translate}}">
				<p id="feedback-form-email-error-msg"
					role="text"
					class="email-error-msg"
					*ngIf="feedbackForm.value.userEmail && feedbackForm.get('userEmail').invalid && isSubmitted">{{'dashboard.feedback.form.invalidEmailMsg' | translate}}</p>
			</div>
		</form>
		<div class="line"></div>
		<div class="d-flex align-items-center btn-box">
			<div class="btn-submit">
				<vtr-ui-button linkId="modal-btn-sendfeedback"
					metricsEvent="FeatureClick"
					metricsItem="SendFeedbackButton"
					metricsParent="Dialog.Feedback"
					[tabIndex]="feedbackSuccess ? -1 : 0"
					[btnHeight]="true"
					[isFullWidth]="true"
					[isDisabled]="!feedbackForm.value.userComment && feedbackForm.value.cusSupportUsage === null && feedbackForm.value.systemUpdateAwareness === null && feedbackForm.value.recommendVantageToFriend === null"
					[label]="'dashboard.feedback.form.sendFeedback' | translate"
					(onClick)="onFeedBackSubmit()"></vtr-ui-button>
			</div>
			<!-- <div class="btn-submit-screenshot text-ellipsis"
				[tabindex]="feedbackSuccess ? -1 : 0"
				vtrMetrics
				id="modal-btn-submitScreeenshot"
				attr.aria-label="Submit Screeenshot"
				metricsItem="btn.SubmitScreenShot"
				metricsEvent="FeatureClick"
				metricsParent="Dialog.Feedback"
				title="{{'dashboard.feedback.form.submitScreenShot' | translate}}"
				(keyup.enter)="goToMailUtility()"
				(click)="goToMailUtility()">
				{{'dashboard.feedback.form.submitScreenShot' | translate}}
			</div> -->
		</div>
	</div>
	<div class="feedback-success d-flex align-items-center justify-content-center"
		*ngIf="feedbackSuccess">
		<div>
			<div class="success-icon">
				<fa-icon [icon]="['fal', 'check-circle']"></fa-icon>
			</div>
			<div class="thank-you"
				id="feedback-modal-thank-you"
				role="text">{{ 'dashboard.feedback.form.messages.feedbackSuccess' | translate }}</div>
			<div class="left-time">{{ leftTime }}</div>
		</div>
	</div>
</div>
