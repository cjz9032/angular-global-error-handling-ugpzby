@import '../../../app.theme';

@mixin overlay {
	content: '';
	background: rgba(0, 0, 0, 0);
	width: 100%;
	height: 100%;
	top: 0;
	left: 0;
	position: absolute;
	border-radius: $border_radius;
	z-index: 0;

	@media #{$high-contrast} {
		background: none;
	}
}

.vtr-widget-carousel {
	box-shadow: $drop_shadow;
	border-radius: $border_radius;
	position: relative;
	background: $light;
	height: 100% !important;
	ngb-carousel {
		&:focus {
			@include outline-blue;
		}
	}

	.carousel-link {
		display: block;
		border-radius: $border_radius;
		overflow: hidden;
		&:focus {
			@include outline-blue;
		}
	}

	a.no-link {
		cursor: default;
		pointer-events: none;
	}

	.default-cursor {
		cursor: default;
	}

	.carousel-caption {
		position: absolute;
		top: 0;
		left: 0;
		padding: 2rem 2.5rem;
		right: 0 !important;
		text-align: left;
		z-index: 1;

		.description {
			padding: 0;
			font-size: $fontsize_md;
			font-weight: $weight_light;
			color: $light;
			text-shadow: 0.2rem 0.2rem 0.2rem $shade_extradark;
			line-height: 1.4;
			overflow: hidden;
			text-overflow: ellipsis;
			display: -webkit-box;
			-webkit-line-clamp: 2;
			-webkit-box-orient: vertical;
		}

		.title {
			padding: 0;
			color: $light;
			text-shadow: 0.2rem 0.2rem 0.2rem $shade_extradark;
			font-size: $fontsize_xl2;
			font-weight: $weight_regular;
			line-height: 1.4;
		}
	}

	.image {
		width: 100%;
		background-size: cover;
		background-position: center center;
		height: 100% !important;
		min-height: 24rem;

		&.overlay-dark {
			&::after {
				@include overlay();
				background: rgba(0, 0, 0, 0.4);
			}
		}
	}
	@media #{$black-on-white} {
		border: 0.1rem solid $dark;
	}
	@media #{$white-on-black} {
		border: 0.1rem solid $light;
	}

	&.is-short {
		.carousel-caption {
			.title {
				font-weight: $weight_light;
			}
			.description {
				display: none;
			}
		}
		.image {
			min-height: 20rem;
		}
	}
}

:host-context(.is-gaming) {
	.vtr-widget-carousel {
		ngb-carousel {
			&:focus {
				@media #{$high-contrast} {
					outline: 0.1rem solid highlight;
				}
			}
		}
	}
}

// DEEP SELECTOR REQUIRED FOR NESTED COMPONENT STYLING
::ng-deep {
	.vtr-widget-carousel {
		.carousel {
			.carousel-inner {
				overflow: inherit;
			}
			.carousel-control-prev,
			.carousel-control-next {
				width: 8.5%;
			}
			.carousel-control-prev {
				width: 4rem;
				height: 4rem;
				top: calc(50% - 2rem);
				left: 1rem;
				@media #{$black-on-white} {
					opacity: 1;
					background-color: $light;
				}

				@media #{$white-on-black} {
					opacity: 1;
					background-color: $dark;
				}

				&:hover {
					opacity: 1;
					color: $main;

					@media #{$white-on-black} {
						color: $high-contrast-black-textselected;
					}

					@media #{$black-on-white} {
						color: $high-contrast-white-textselected;
					}
				}
			}
			.carousel-control-next {
				width: 4rem;
				height: 4rem;
				top: calc(50% - 2rem);
				right: 1rem;
				@media #{$black-on-white} {
					opacity: 1;
					background-color: $light;
				}

				@media #{$white-on-black} {
					opacity: 1;
					background-color: $dark;
				}

				&:hover {
					opacity: 1;
					color: $main;

					@media #{$white-on-black} {
						color: $high-contrast-black-textselected;
					}

					@media #{$black-on-white} {
						color: $high-contrast-white-textselected;
					}
				}
			}
			.carousel-control-next-icon {
				position: relative;
				right: 0.5rem;
				background-image: none;
				width: 2rem;
				height: 2rem;
				border-top: 0.3rem solid $light;
				border-right: 0.3rem solid $light;
				transform: rotate(45deg);
				&:hover,
				&:active {
					@media #{$white-on-black} {
						border-top: 0.3rem solid $high-contrast-black-cyan;
						border-right: 0.3rem solid $high-contrast-black-cyan;
					}
					@media #{$black-on-white} {
						border-top: 0.3rem solid $high-contrast-white-dark-magenta;
						border-right: 0.3rem solid $high-contrast-white-dark-magenta;
					}
				}
			}
			.carousel-control-prev-icon {
				position: relative;
				left: 0.5rem;
				background-image: none;
				width: 2rem;
				height: 2rem;
				border-top: 0.3rem solid $light;
				border-left: 0.3rem solid $light;
				transform: rotate(-45deg);
				&:hover,
				&:active {
					@media #{$white-on-black} {
						border-top: 0.3rem solid $high-contrast-black-cyan;
						border-left: 0.3rem solid $high-contrast-black-cyan;
					}
					@media #{$black-on-white} {
						border-top: 0.3rem solid $high-contrast-white-dark-magenta;
						border-left: 0.3rem solid $high-contrast-white-dark-magenta;
					}
				}
			}

			@media #{$high-contrast} {
				.carousel-indicators li {
					padding: 0.3rem 0;
					border: 0.1rem solid currentColor;
				}
			}

			.carousel-indicators {
				margin-bottom: 1rem;
				li {
					margin: 0 0.3rem;
					&.active {
						@media #{$black-on-white} {
							@include high-contrast-white-background;
						}
						@media #{$white-on-black} {
							@include high-contrast-black-background;
						}
					}
				}
			}
		}
	}
}
