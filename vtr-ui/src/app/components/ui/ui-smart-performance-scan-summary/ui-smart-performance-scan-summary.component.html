<vtr-page-layout [title]="title" [textId]="'myDevice'" [pageCssClass]="'device'" [shiftLeftUp]="true"
	[shiftRightUp]="true">
	<left-content>
		<div class="row vtr-page-content" *ngIf="!isScanning && !isScanningCompleted">
			<div class="col vtr-col">
				<div class="container-fluid mb-5">
					<div class="row">
						<div class="vtr-page-left-column">
							<div class="vtr-page-shift-up">
								<div class="vtr-device-information">
									<div class="container-fluid">
										<div class="system-scan-complete">
											<div class="row">
												<div class="col col-12 offline-info-background">
													<div class="w-100">
														<div class="row d-flex justify-content-between">
															<div class="mt-5" *ngIf="!isSubscribed">
																<h1>{{'smartPerformance.scanCompletePage.title' |translate }}
																</h1>
																<h3>{{'smartPerformance.scanCompletePage.description' |translate }}
																	{{machineFamilyName}}</h3>
															</div>
															<div class="mt-5" *ngIf="isSubscribed">
																<h1>{{'smartPerformance.subscriberScanHomePage.title' |translate }}
																	{{machineFamilyName}}</h1>
																<h3>{{'smartPerformance.subscriberScanHomePage.serialNumber' |translate }}
																	{{systemSerialNumber}}</h3>
															</div>
															<span class="icomoon icomoon-pcScan"></span>
														</div>
														<hr class="light-dashline" />
													</div>

													<div *ngIf="!inputIsScanningCompleted" class="performance-slider-block before-result">
														<div class="slider">
															<div class="condition">
																<div class="critical">{{'smartPerformance.critical' |translate }}</div>
																<div class="well">{{'smartPerformance.allisWell' |translate }}</div>
															</div>
															<div class="verticle-lines">
																<div class="line"></div>
																<div class="line"></div>
																<div class="line"></div>
																<div class="line"></div>
																<div class="line"></div>
																<div class="line"></div>
																<div class="line"></div>
																<div class="line"></div>
																<div class="line"></div>
																<div class="line"></div>
																<div class="line"></div>
															</div>
														</div>
														<div class="pc-status-info d-flex">
															<p class="info-text needs-tune-up"><span>{{'smartPerformance.tuneUP' |translate }}</span></p>
															<p class="info-text running-well"><span>{{'smartPerformance.runningWell' |translate }}</span></p>
														</div>
													</div>

													<div *ngIf="inputIsScanningCompleted" class="performance-slider-block scan-results">
														<h3 class="recomendation-text"  *ngIf="!isSubscribed">
															{{'smartPerformance.scanCompletePage.scanRates' |translate }}<span>{{rating}}</span>
														</h3>
														<h3 class="recomendation-text"  *ngIf="(isSubscribed)">
															{{'smartPerformance.scanCompletePage.scanRates' |translate }}<span>{{rating}}</span>
														</h3>
														<div class="slider">
															<div class="verticle-lines">
																<div class="scan-pointer" [ngStyle]="{'left': leftAnimator}" *ngIf="!isSubscribed">&#9660;</div>
																<div class="scan-pointer" [ngStyle]="{'left': leftAnimator}" *ngIf="inputIsScanningCompleted">&#9660;</div>
																<div class="line"></div>
																<div class="line"></div>
																<div class="line"></div>
																<div class="line"></div>
																<div class="line"></div>
																<div class="line"></div>
																<div class="line"></div>
																<div class="line"></div>
																<div class="line"></div>
																<div class="line"></div>
																<div class="line"></div>
															</div>
															<div class="condition">
																<div class="critical">
																	{{'smartPerformance.critical' |translate }}</div>
																<div class="well">
																	{{'smartPerformance.allisWell' |translate }}</div>
															</div>
														</div>
													</div>
												</div>
											</div>
											<div class="row">
												<div class="summary-block" *ngIf="!isSubscribed">
													<h1 class="title-big mb-3">
														{{'smartPerformance.scanCompletePage.summary' |translate }}</h1>
													<p
														[innerHTML]="'smartPerformance.scanCompletePage.summaryDetails' |translate:{issueCount: issueCount }">
													</p>
													<div class="d-flex justify-content-between my-5">
														<button class="action-button" vtrMetrics
															metricsItem="smartPerformance.subscribeModal"
															metricsEvent="ItemClick"
															metricsParent="pages.support.smartPerformance"
															(click)=openSubscribeModal()>{{'smartPerformance.scanCompletePage.signupRepairButton' |translate }}</button>
														<div class="desc col pl-5">
															<p
																[innerHTML]="'smartPerformance.scanCompletePage.monthlyPricing' |translate">
															</p>
														</div>
													</div>
													<vtr-ui-accordion [tune]="tune"	[boost]="boost" [secure]="secure" [scannigResultObj]= "scannigResultObj"></vtr-ui-accordion>
												</div>
												<div class="summary-block" *ngIf="isSubscribed">
													<h3>{{'smartPerformance.subscriberScanHomePage.subTitle' |translate }}
													</h3>
													<p>{{'smartPerformance.subscriberScanHomePage.description' |translate }}
													</p>
													<div class="d-flex justify-content-between my-5 w-75">
														<button class="action-button" (click)="ScanNowSummary()"
															vtrMetrics metricsItem="smartPerformance.scanNow"
															metricsEvent="FeatureClick"
															metricsParent="pages.support.smartPerformance">{{'smartPerformance.subscriberScanHomePage.scanNow' |translate }}</button>
														<div class="desc desc1">
															<b>{{'smartPerformance.subscriberScanHomePage.mostRecent' |translate }}</b><br>
															{{mostRecentScan}}
														</div>
														<div class="desc">
															<b>{{'smartPerformance.subscriberScanHomePage.nextScheduled' |translate }}</b><br>
															{{nextScheduleScan}}
														</div>
													</div>
												</div>
											</div>
											<div class="row"></div>
										</div>
										<!-- <vtr-ui-smart-performance-scan-summary></vtr-ui-smart-performance-scan-summary> -->
										<!-- subscriber part -->

									</div>
								</div>
								<div class="vtr-device-information">
									<div class="vtr-ui-smart-performance-scan-summary" *ngIf="isSubscribed">
										<div class="vtr-scan-information mt-5">
											<div class="scan-summary-block">
												<div class="row px-0">
													<div class="navbar bkg-transparent justify-content-between w-100">

														<div class="title-block">
															<h3>{{'smartPerformance.subscriberScanHomePage.scanSummary.title' |translate }}
															</h3>
															<p>{{'smartPerformance.subscriberScanHomePage.scanSummary.description' |translate }}
															</p>
														</div>


														<div class="summary-period">
															<ul class="list-group list-group-horizontal">
																<div class="dropdown">
																	<li id="dropdownMenu1"
																		class="list-group-item cl list-selected-item">
																		<fa-icon class="calender-icon"
																			[icon]="['fal', 'calendar-alt']"></fa-icon>
																		<span
																			*ngIf="!dropDownToggle">{{currentDate}}</span>
																		<span
																			*ngIf="tabIndex === 0">{{annualYear}}</span>
																		<span
																			*ngIf="tabIndex === 1">{{quarterlyMonth?.displayName}}</span>
																		<span
																			*ngIf="tabIndex === 2">{{customDate}}</span>
																		<fa-icon class="drop-down-icon"
																			*ngIf="dropDownToggle && !isDropDownOpen"
																			(click)="openDropDown()"
																			[icon]="['fas', 'chevron-down']"></fa-icon>
																		<fa-icon class="drop-down-icon"
																			*ngIf="dropDownToggle && isDropDownOpen"
																			(click)="openDropDown()"
																			[icon]="['fas', 'chevron-up']">
																		</fa-icon>
																	</li>
																</div>
																<li class="list-group-item"
																	*ngFor="let item of menuItems;let ind=index"
																	(click)="scanSummaryTime(ind)"
																	[ngClass]="{'selected-list-item': tabIndex === ind}">
																	{{item.itemName}}
																	<!-- <div class="list-item" >
																	</div> -->
																</li>
																<!-- <li class="list-group-item" (click)="scanSummaryTime()">quarterly</li>
																<li class="list-group-item" (click)="scanSummaryTime()">custom</li> -->
															
															</ul>
															<div *ngIf="isDropDownOpen && tabIndex != 2"
																[ngClass]="[tabIndex ===2 ? 'calender-drop' : 'dropdownmenu']">
																<div *ngIf="tabIndex === 0">
																	<a (click)="anualScanSummary(year)"
																		*ngFor="let year of yearsList"
																		[ngClass]="{'link-active': year.displayName == annualYear}"
																		vtrMetrics
																		metricsItem="smartPerformance.annualScanSummary"
																		metricsEvent="FeatureClick"
																		metricsParent="pages.support.smartPerformance">
																		>
																		{{year.displayName}}
																		<br>
																	</a>
																	<!-- <a (click)="anualScanSummary(lastYear)"
																[ngClass]="{'link-active':lastYear == annualYear}">{{lastYear}}</a> -->
																</div>
																<div *ngIf="tabIndex === 1">
																	<div
																		*ngFor="let menu of quarterlyMenu;let ind=index">
																		<a (click)="quarterlyScanSummary(menu)"
																			[ngClass]="{'link-active':menu.key == quarterlyMonth.key}"
																			vtrMetrics
																			metricsItem="smartPerformance.quaterlyScanSummary"
																			metricsEvent="FeatureClick"
																			metricsParent="pages.support.smartPerformance">{{menu.displayName}}</a>
																	</div>
																</div>

															</div>
															<div *ngIf="isDropDownOpen && tabIndex === 2"
																class="calender-dropDown">
																<div *ngIf="tabIndex === 2">
																	<div class="row mt-1">
																		<div class="col">
																			<div class="row custom-from-date py-3"
																				[ngClass]="{'selected-custom-date':isFromDate}">
																				<div class="col-1">
																					{{'smartPerformance.subscriberScanHomePage.scanSummary.txtFrom' |translate }}
																				</div>
																				<div class="col-auto"><input type='text'
																						[ngModel]="displayFromDate"
																						(click)="selectFromDate()"
																						readonly /></div>
																			</div>
																			<div class="row custom-to-date mt-3 py-3"
																				[ngClass]="{'selected-custom-date':!isFromDate}">
																				<div class="col-1">
																					{{'smartPerformance.subscriberScanHomePage.scanSummary.txtTo' |translate }}
																				</div>
																				<div class="col-auto"><input type='text'
																						[ngModel]="displayToDate"
																						(click)="selectToDate()"
																						readonly /></div>

																			</div>
																			<div class="row">
																				<div class="col-3"></div>
																				<div class="col-9"><button
																						class="custom-go-btn mt-3"
																						(click)="customDateScanSummary()"
																						vtrMetrics
																						metricsItem="smartPerformance.customScanSummary"
																						metricsEvent="FeatureClick"
																						metricsParent="pages.support.smartPerformance">{{'smartPerformance.subscriberScanHomePage.scanSummary.txtGo' |translate }}</button>
																				</div>
																			</div>
																		</div>
																	</div>
																	<div class="col date-picker">
																		<ngb-datepicker *ngIf="isFromDate" [(ngModel)]="selectedfromDate" [maxDate]="maxDate"
																			(select)="onDateSelected()"></ngb-datepicker>
																		<ngb-datepicker *ngIf="!isFromDate" [(ngModel)]="selectedTodate" [maxDate]="maxDate"
																			(select)="onDateSelected()"></ngb-datepicker>
																	</div>
																</div>
															</div>
														</div>
													</div>

												</div>
												<div class="row my-5 d-flex justify-content-between px-0">
													<div class="tune">
														<div class="d-flex">
															<div class="w-100">
																<div class="box-title d-flex  justify-content-between">
																	<h5>{{'smartPerformance.tunePCPerformance.summaryTitle' |translate }}</h5>
																	<div class="icon icon-performance"></div>
																</div>																
																<div class="value d-flex justify-content-center">
																	{{historyRes.Tunecount || 0}} <span>{{'smartPerformance.subscriberScanHomePage.scanSummary.fixes' |translate }}</span>
																</div>
																<p class="w-100 text-center">{{formatMemorySize(historyRes.Tunesize)}} <span class="mr-1">{{sizeExtension}}</span> {{'smartPerformance.subscriberScanHomePage.scanSummary.summaryCaption' |translate }}
																</p>
															</div>
															
														</div>
													</div>
													<div class="boost">
														<div class="d-flex">
															<div class="w-100">
																<div class="box-title d-flex  justify-content-between">
																	<h5>{{'smartPerformance.boostInternetPerformance.summaryTitle' |translate }}</h5>
																	<div class="icon icon-internet-performance"></div>
																</div>
																<div class="value d-flex justify-content-center">{{historyRes.Boostcount || 0}} <span>{{'smartPerformance.subscriberScanHomePage.scanSummary.fixes' |translate }}</span></div>
																<p class="w-100 text-center">{{formatMemorySize(historyRes.Boostsize)}}  <span class="mr-1">{{sizeExtension}}</span> {{'smartPerformance.subscriberScanHomePage.scanSummary.summaryCaption' |translate }}
																</p>
															</div>
															
														</div>
													</div>
													<div class="secure">
														<div class="d-flex">
															<div class="w-100">
																<div class="box-title d-flex  justify-content-between">
																	<h5>{{'smartPerformance.malwareSecurity.summaryTitle' |translate }}</h5>
																	<span class="icomoon icomoon-malware"></span>
																</div>
																
																<div class="value d-flex justify-content-center">{{historyRes.Secure || 0}} <span>{{'smartPerformance.subscriberScanHomePage.scanSummary.fixes' |translate }}</span></div>
																<!-- <p>{{'smartPerformance.subscriberScanHomePage.scanSummary.secureSummary' |translate }}</p> -->
															</div>
															
														</div>
													</div>
												</div>
												<div class="row px-0">
													<div class="title-block">
														<h3>{{'smartPerformance.subscriberScanHomePage.lastScanResults.title' |translate }}
														</h3>
													</div>
												</div>
												<div class="row px-0">
													<div class="col">
														<div class="scan-list-container">
															<div class="row">
																<div class="col">
																	<ul class="scan-list">
																		<li class=" list-item list-heading">
																			<div class="container-fluid">
																				<div class="row align-items-center">
																					<div class="offset-1 col-7">
																						{{'smartPerformance.subscriberScanHomePage.lastScanResults.scanDate' |translate }}
																					</div>
																					<div class="col-2">
																						{{'smartPerformance.subscriberScanHomePage.lastScanResults.results' |translate }}
																					</div>
																					<div class="col-2">
																						{{'smartPerformance.subscriberScanHomePage.lastScanResults.status' |translate }}
																					</div>
																				</div>
																			</div>
																		</li>
																		<li class=" list-item"
																			*ngFor="let item of historyScanResults;let ind=index">
																			<div class="container-fluid">
																				<div class="row align-items-center">
																					<div class="col-1 text-center">
																						<fa-icon *ngIf="toggleValue === ind" class="chevron-up"
																							[icon]="['fal', 'chevron-up']"
																							(click)="expandRow(ind)">
																						</fa-icon>
																						<fa-icon *ngIf="toggleValue != ind" class="chevron-down"
																							[icon]="['fal', 'chevron-down']"
																							(click)="expandRow(ind)">
																						</fa-icon>
																					</div>
																					<div class="col-7">
																						<b>{{item.scanruntime | date: 'dd/MM/yyyy'}}</b>
																						<span> -
																							{{item.scanruntime | date: 'h:mm a'}}</span>
																					</div>
																					<div class="col-2">{{item.fixcount}} Fixes 
																					</div>
																					<div class="col-2" *ngIf="item.status === 'C'">
																						<div class="icon-check">
																							<div class="icon-bkg">
																								<fa-icon
																									[icon]="['fas', 'check']">
																								</fa-icon>
																							</div>
																						</div>
																					</div>
																					<div class="col-1" *ngIf="item.status === 'S'">
																						<div class="icon-times">
																							<div class="icon-bkg">
																								<fa-icon
																									[icon]="['fas', 'times']">
																								</fa-icon>
																							</div>
																						</div>
																					</div>
																				</div>
																				<div class="row pl-0 pr-0" *ngIf="toggleValue === ind">
																					<div class="col-12 pl-0 pr-0">
																						<div class="row pl-0 pr-0 pt-3">
																							<div class="col-1">&nbsp;</div>
																							<div class="scan-items col-7">
																								<div class="row">
																									<div
																										class="icon icon-performance">
																									</div>
																									{{'smartPerformance.tunePCPerformance.summaryTitle' |translate }}
																								</div>
																							</div>
																							<div
																								class="scan-item-value col-2">
																								{{item.Tune || 0}}
																							</div>
																							<div class="scan-status col-2 px-2"
																								*ngIf="item.status">
																								<fa-icon
																									[icon]="['fas', 'circle']">
																								</fa-icon>
																							</div>
																							<div class="scan-status col-2 px-2"
																								*ngIf="!item.status">
																								<fa-icon
																									class="red-icon"
																									[icon]="['fas', 'circle']">
																								</fa-icon>
																							</div>
																						</div>

																						<div class="row pl-0 pr-0">
																							<div class="col-1">&nbsp;</div>
																							<div class="scan-items col-7">
																								<div class="row">																									
																									<div class="icon icon-internet-performance">
																									</div>
																									{{'smartPerformance.boostInternetPerformance.summaryTitle' |translate }}
																								</div>
																							</div>
																							<div
																								class="scan-item-value col-2">
																								{{item.Boost || 0}}
																							</div>
																							<div class="scan-status col-2 px-2"
																								*ngIf="item.status">
																								<fa-icon
																									[icon]="['fas', 'circle']">
																								</fa-icon>
																							</div>
																							<div class="scan-status col-2 px-2"
																								*ngIf="!item.status">
																								<fa-icon
																									class="red-icon"
																									[icon]="['fas', 'circle']">
																								</fa-icon>
																							</div>
																						</div>
																						<div class="row pl-0 pr-0">
																								<div class="col-1">&nbsp;</div>
																							<div class="scan-items col-7">
																								<div class="row">
																									<div
																										class="icon icon-malware-security">
																									</div>
																									{{'smartPerformance.malwareSecurity.summaryTitle' |translate }}
																								</div>
																							</div>
																							<div
																								class="scan-item-value col-2">
																								{{item.secure || 0}}
																							</div>
																							<div class="scan-status col-2 px-2"
																								*ngIf="item.status">
																								<fa-icon
																									[icon]="['fas', 'circle']">
																								</fa-icon>
																							</div>
																							<div class="scan-status col-2 px-2"
																								*ngIf="!item.status">
																								<fa-icon
																									class="red-icon"
																									[icon]="['fas', 'circle']">
																								</fa-icon>
																							</div>
																						</div>
																					</div>

																				</div>
																			</div>
																		</li>
																	</ul>
																</div>
															</div>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>

					</div>
				</div>
			</div>

		</div>
	</left-content>
	<right-content>
		<div class="row vtr-page-content" *ngIf="!isScanning && !isScanningCompleted">
			<div class="col vtr-col">
				<div class="container-fluid">
					<div class="row">

						<div class="vtr-page-right-column">
							<div class="vtr-page-shift-up">
								<div class="container-fluid">
									<div class="row mb-40" *ngIf="isSubscribed">
										<div class="col col-12">
											<!----------Scan Schedule--------------->
											<vtr-ui-scan-schedule (scanDatekValueChange)='changeNextScanDateValue()'></vtr-ui-scan-schedule>
											<!----------Scan Schedule--------------->
										</div>
									</div>
									<div class="row mb-40" *ngIf="!isSubscribed">
										<div class="col col-12">
											<div class="recommended-action sidebar-widget">
												<div class="title pb-3">
													{{'smartPerformance.scanCompletePage.recommendedAction.title' |translate }}
												</div>
												<div class="card-info">
													<p>{{'smartPerformance.scanCompletePage.recommendedAction.description' |translate }}
														<!-- <a href="#" class="link-text" vtrMetrics
															metricsItem="smartPerformance.learnmore"
															metricsEvent="ArticleClick"
															metricsParent="pages.support.smartPerformance">{{'smartPerformance.subscriptionDetails.learnMore' |translate }}</a> -->
													</p>
													<p>{{'smartPerformance.scanCompletePage.recommendedAction.description1' |translate }}</p>
												</div>
												<!-- <div class="pricing">
													<h2 class="big-text">
														{{'smartPerformance.scanCompletePage.recommendedAction.yearlyPricing' |translate }}
													</h2>
													<small>{{'smartPerformance.scanCompletePage.recommendedAction.monthlyPricing' |translate }}</small>
												</div>
												<p>{{'smartPerformance.scanCompletePage.recommendedAction.longerTerm' |translate }}
												</p> -->
												<!-- These are commented as per new requirment please dont delete -->
												<button class="action-button mt-2" vtrMetrics
													metricsItem="smartPerformance.subscribeModal"
													metricsEvent="FeatureClick"
													metricsParent="pages.support.smartPerformance"
													(click)=openSubscribeModal()>{{'smartPerformance.scanCompletePage.recommendedAction.signupButton' |translate }}</button>
											</div>
										</div>
									</div>
									<div class="row mb-40" *ngIf="isSubscribed">
										<div class="col col-12">
											<vtr-widget-subscriptiondetails></vtr-widget-subscriptiondetails>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</right-content>
</vtr-page-layout>
