<div class="modal-body vtr-modal-scan-failure" aria-labelledby="hwscan-scan-failure-title" aria-describedby="hwscan-scan-failure-description">

	<div class="modal-information">
		<h1 id="hwscan-scan-failure-title" class="title" role="heading">{{ 'hardwareScan.scanFailureModal.title' | translate }}</h1>
		<p id="hwscan-scan-failure-description" class="description" role="text">{{ 'hardwareScan.scanFailureModal.problemDetected' | translate }}</p>
		<div class="modules-container">
			<ul role="list" class="list-modules" aria-live="polite" *ngFor="let module of failedModules; let idModule = index;" [attr.id]="'module-' + idModule">
				<li role="listitem"
					class="item-module-device"
					*ngFor="let device of module.devices; let idDevice = index"
					[attr.aria-describedby]="'module-' + idModule + '-device-' + idDevice">
					<div class="module-device-row" [attr.id]="'module-' + idModule + '-device-' + idDevice" role="region">
						<div class="module-device-name-container">
							<p class="module-name" id="hwscan-failure-modal-module-name" role="text">{{ module.moduleName }}</p>
							<p class="description device-name" id="hwscan-failure-modal-device-name" role="text">{{ device.deviceName }}</p>
						</div>
						<vtr-ui-hardware-scan-test-result [module]="module"></vtr-ui-hardware-scan-test-result>
					</div>
				</li>
			</ul>
		</div>

		<div *ngIf="hasFailedRbsDevice; else withoutRBS">
			<div class="description description-failure">
				<p [innerHTML]="'hardwareScan.scanFailureModal.suggestedActionRbs' | translate" id="hwscan-recover-failure-description" role="text"></p>
			</div>
			<div class="row button-row">
				<vtr-ui-button
					class="button-container"
					metricsParent="HardwareScan.ScanFailureActions"
					metricsItem="ScanFailureActions.RecoverBadSectors"
					linkId="hwscan-go-to-rbs-btn"
					(onClick)="openRbsModal()"
					[label]="'hardwareScan.scanFailureModal.recoverBadSectorsButtonText' | translate">
				</vtr-ui-button>
				<vtr-ui-hyperlink-button
					hyperlinkStyle="xs-blue-lighter"
					metricsParent="HardwareScan.ScanFailureActions"
					metricsItem="ScanFailureActions.LenovoSupport"
					linkId="hwscan-open-support-page-link"
					(hyperlinkClick)="openSupportPage()"
				   	[label]="'hardwareScan.scanFailureModal.supportButtonText' | translate"
					[upperCaseLabel]="true">
				</vtr-ui-hyperlink-button>
			</div>
		</div>

		<ng-template #withoutRBS>
			<div class="description description-failure">
				<p [innerHTML]="'hardwareScan.scanFailureModal.suggestedActionSupport' | translate" id="hwscan-failure-description" role="text"></p>
			</div>
			<div class="row">
				<div class="col button-row">
					<vtr-ui-button
						metricsParent="HardwareScan.ScanFailureActions"
						metricsItem="ScanFailureActions.LenovoSupport"
						linkId="hwscan-open-ticket-btn"
						(onClick)="openSupportPage()"
						[label]="'hardwareScan.scanFailureModal.supportButtonText' | translate">
					</vtr-ui-button>
				</div>
			</div>
		</ng-template>

		<div class="btn-modal-close">
			<vtr-ui-close-button
				linkId="hwscan-scan-failure-modal-close-btn"
				metricsItem="ScanFailureActions.Close"
				metricsParent="HardwareScan.ScanFailureActions"
				(clickClose)="closeModal()">
			</vtr-ui-close-button>
		</div>
	</div>
</div>
