<div class="vtr-battery-charge-threshold-settings">
	<div class="container-fluid">
		<!--start of display title in row-->
		<div class="row"
			*ngIf="title && !displayNoteOnly">
			<div class="col px-5 pb-4">
				<div class="threshold-for-built-in-battery"
					id="{{textId}}-title"
					attr.aria-label="{{textId}}-title">
					{{ title }}
				</div>
			</div>
		</div>

		<!--end of display title in row-->
		<!--start of display inputs for action in row-->
		<div class="row"
			*ngIf="!displayNoteOnly">
			<div class="col">
				<div class="inputSection">
					<div class="row">
						<!--start of left dropdown box for action in row-->
						<div class="col-12 px-5 pb-4"
							[class.disabled]="bctInfo.checkboxValue || isDisabled">
							<div class="btn-group btn-block dropdown-left"
								ngbDropdown
								#startAtDropDown="ngbDropdown"
								placement="bottom-right">
								<button [ngClass]="['btn','btn-outline-shadow',bctInfo.checkboxValue?'disabled':'']"
									ngbDropdownToggle
									#startToggle
									[disabled]="bctInfo.checkboxValue?true:false"
									id="{{textId}}-start-dropdown"
									(focus)="[closeAllOtherDD(startAtDropDown)]"
									role="combobox"
									tabindex="0"
									attr.aria-haspopup="true"
									attr.aria-label="{{title}}-{{ddStartAtChargeDescription}}-{{bctInfo.startValue}}%-{{option}}-
									{{startAtChargeOptions.indexOf(bctInfo.startValue)+1}}-{{off}}-{{startAtChargeOptions.length}}-{{selected}}"
									(keyup.esc)="[$event.preventDefault(),startAtDropDown.isOpen()?startToggle.click():'',startToggle.focus()]"
									(keyup)="ddToggleKBNavigator($event,startAtDropDown,startAtChargeOption,bctInfo.startValue)">

									<div class="row d-flex justify-content-between">
										<div class="col-11 pl-1 pr-1">
											<div class="select-title"
												id="{{textId}}-start-charge"
												attr.aria-label="{{title}}-start-charge">
												{{ddStartAtChargeDescription}}
											</div>

											<div class="select-text text-left"
												id="{{textId}}-selected-start-charge"
												attr.aria-label="{{title}}-selected-start-charge">
												{{bctInfo.startValue}}%
											</div>
										</div>
										<div class="col-1 pl-1 pr-1">
											<div class="dropdown-icon">
												<fa-icon [icon]="['fas', 'chevron-down']"></fa-icon>
											</div>
										</div>
									</div>
								</button>
								<div ngbDropdownMenu
									attr.aria-labelledby="{{textId}}-start-dropdown"
									role="listbox"
									tabindex="-1">
									<a [ngClass]="['dropdown-item',item >= bctInfo.stopValue?'disabled':'']"
										ngbDropdownItem
										role="option"
										tabindex="{{item === bctInfo.startValue?0:-1}}"
										*ngFor="let item of startAtChargeOptions;let currentIndex=index;"
										(click)="[onStartValueChange(item , startAtDropDown,startToggle), $event.preventDefault()]"
										(keyup.esc)="ddItemKeyEscHandler($event,startAtDropDown,startToggle)"
										(keydown.enter)="[onStartValueChange(item ,startAtDropDown, startToggle),$event.preventDefault()]"
										(keydown.tab)="showHideMenuOfItem($event,startAtDropDown)"
										(keydown.shift.tab)="showHideMenuOfItem($event,startAtDropDown)"
										id="{{textId}}-{{startAtChargeOption}}-{{item}}"
										[attr.aria-selected]="bctInfo.startValue===item?true:false"
										[disabled]="item >= bctInfo.stopValue"
										attr.aria-disabled="{{item >= bctInfo.stopValue}}"
										attr.aria-label="{{title}}-{{ddStartAtChargeDescription}}-{{option}}-{{item}}">{{item}}%</a>
								</div>
							</div>
						</div>
						<!--end of left dropdown box for action in row-->
					</div>
					<div class="row">
						<!--start of right dropdown box for action in row-->
						<div class="col-12 px-5 pb-4"
							[class.disabled]="isDisabled">
							<div class="btn-group btn-block dropdown-right"
								ngbDropdown
								#stopAtDropDown="ngbDropdown"
								placement="bottom-right">
								<button [ngClass]="['btn','btn-outline-shadow']"
									ngbDropdownToggle
									#endToggle
									tabindex="0"
									id="{{textId}}-stop-dropdown"
									(focus)="[closeAllOtherDD(stopAtDropDown)]"
									role="combobox"
									attr.aria-label="{{title}}-{{ddStopAtChargeDescription}}-{{bctInfo.stopValue}}%-{{option}}-{{stopAtChargeOptions.indexOf(bctInfo.stopValue)+1}}-{{off}}-{{stopAtChargeOptions.length}}-{{selected}}"
									(keyup.esc)="ddItemKeyEscHandler($event,stopAtDropDown,endToggle)"
									(keyup)="ddToggleKBNavigator($event,stopAtDropDown,stopAtChargeOption,bctInfo.stopValue)">
									<div class="row d-flex justify-content-between"
										aria-hidden="true">
										<div class="col-11 pl-1 pr-1">
											<div class="select-title"
												id="{{textId}}-stop-charge"
												attr.aria-label="{{title}}-stop-charge">
												{{ddStopAtChargeDescription}}
											</div>
											<div class="select-text text-left"
												id="{{textId}}-selected-stop-at-charge"
												attr.aria-label="{{title}}-selected-stop-at-charge">
												{{bctInfo.stopValue}}%
											</div>
										</div>
										<div class="col-1 pl-0 pr-1">
											<div class="dropdown-icon">
												<fa-icon [icon]="['fas', 'chevron-down']"></fa-icon>
											</div>
										</div>
									</div>
								</button>
								<div ngbDropdownMenu
									id="{{textId}}-stop-at-charge-menu"
									attr.aria-labelledby="{{textId}}-stop-dropdown"
									role="listbox"
									tabindex="-1">
									<a [ngClass]="['dropdown-item',!bctInfo.checkboxValue && (item <= bctInfo.startValue) ?'disabled':'']"
										ngbDropdownItem
										role="option"
										tabindex="{{item === bctInfo.stopValue?0:-1}}"
										*ngFor="let item of stopAtChargeOptions;let currentIndex=index;"
										(click)="[onStopValueChange(item ,stopAtDropDown, endToggle), $event.preventDefault()]"
										(keyup.esc)="ddItemKeyEscHandler($event,stopAtDropDown,endToggle)"
										(keydown.enter)="[onStopValueChange(item,stopAtDropDown,endToggle),$event.preventDefault()]"
										(keydown.tab)="showHideMenuOfItem($event,stopAtDropDown)"
										(keydown.shift.tab)="showHideMenuOfItem($event,stopAtDropDown)"
										id="{{textId}}-{{stopAtChargeOption}}-{{item}}"
										[disabled]="!bctInfo.checkboxValue && (item <= bctInfo.startValue)"
										[attr.aria-selected]="bctInfo.stopValue===item?true:false"
										attr.aria-disabled="{{!bctInfo.checkboxValue && (item <= bctInfo.startValue)}}"
										attr.aria-label="{{title}}-{{ddStopAtChargeDescription}}-{{option}}-{{item}}">{{item}}%</a>
								</div>
							</div>
						</div>
						<!--end of right dropdown box for action in row-->
					</div>
					<div class="row"
						*ngIf="!displayNoteOnly"
						[class.disabled]="isDisabled">
						<div class="col px-5">
							<vtr-ui-checkbox [componentId]="'cb' + textId"
								[disabled]="isDisabled"
								[value]="bctInfo.checkboxValue"
								[checked]="bctInfo.checkboxValue"
								[label]="'device.deviceSettings.power.batterySettings.batteryThreshold.options.checkboxText' | translate"
								(toggle)='toggleAutoChargeSettings($event)'>
							</vtr-ui-checkbox>
						</div>
					</div>
				</div>
			</div>
			<!--end of display inputs for action in row-->
		</div>
		<!--start of row seperator-->
		<div class="row"
			*ngIf="!displayNoteOnly">
			<div class="col px-20">
				<div class="row-seperator">&nbsp;</div>
			</div>
		</div>
		<!--end of row seperator-->

		<!--start of Note -->
		<div class="row"
			*ngIf="showBCTWarningNote">
			<div class="col px-5">
				<div class="note-box">
					<div class="note"
						id="battery-threshold-note"
						role="heading">
						<b>{{'device.deviceSettings.power.batterySettings.batteryThreshold.note' | translate}}
							:</b>
						{{'device.deviceSettings.power.batterySettings.batteryThreshold.noteInfo' | translate}}
					</div>
				</div>
			</div>
		</div>
		<!--end of Note -->
	</div>
</div>