<div class="vtr-battery-card"
	*ngIf="isLoading">
	<div class="container p-5"
		[style.height.px]="292">
		<div class="loader center-block">
			<div class="spinner-border text-secondary progress-spinner"
				role="status"></div>
		</div>
	</div>
</div>
<div class="vtr-battery-card"
	*ngIf="!isLoading">
	<ng-template #batteryDetail
		let-modal>
		<div class="modal-header">
			<h4 class="modal-title battery-detail-modal-title pl-5">
				{{'device.deviceSettings.batteryGauge.details.title' | translate }}
			</h4>
			<button type="button"
				class="close"
				aria-label="Close"
				(click)="modal.dismiss('Cross click')">
				<img [src]=" 'assets/icons/Close.svg' | svgInline | async" />
			</button>
		</div>
		<div class="modal-body">
			<vtr-battery-detail [data]="batteryInfo"
				[batteryConditionStatus]="batteryConditionStatus"
				[dataGauge]="batteryGauge"> </vtr-battery-detail>
		</div>
	</ng-template>
	<div class="container p-5 background-green">
		<div class="battery-gauge-label text-uppercase">
			{{'device.deviceSettings.batteryGauge.title' | translate}}
		</div>
		<div class="battery-health">
			{{'device.deviceSettings.batteryGauge.subtitle' | translate}}
		</div>
		{{batteryIndicator.percent == 0 && flag ? reInitValue(): ""}}
		<div class="pt-4 battery-frame pr-3">
			<vtr-battery-indicator [remainingHour]="batteryIndicator.hours"
				[remainingMinutes]="batteryIndicator.minutes"
				[percentage]="batteryIndicator.percent"
				[isCharging]="batteryIndicator.charging"
				[isExpressCharging]="batteryIndicator.expressCharging"
				[isVoltageError]="batteryIndicator.voltageError"
				[batteryNotDetected]="batteryIndicator.batteryNotDetected"
				[timeText]="batteryIndicator.timeText">
			</vtr-battery-indicator>
		</div>

		<div class="p-3 row"
			*ngFor="let batteryConditionNote of batteryConditionNotes; let i = index">
			<div class="p-0 pr-2 col-auto battery-conditions-icon">
				<fa-icon *ngIf="batteryConditions[i].conditionStatus == batteryQuality.Good"
					[icon]="['fas', 'check-circle']"
					class="good">
				</fa-icon>
				<fa-icon *ngIf="batteryConditions[i].conditionStatus == batteryQuality.Poor"
					[icon]="['fas', 'times-circle']"
					class="poor">
				</fa-icon>
				<fa-icon *ngIf="batteryConditions[i].conditionStatus == batteryQuality.Fair"
					[icon]="['fas', 'exclamation-circle']"
					class="fair">
				</fa-icon>
			</div>

			<div class="col">
				<span class="battery-conditions-title"
					*ngIf="batteryConditionNote?.title">
					{{batteryConditionNote.title | translate}} &nbsp;
				</span>
				<span class="battery-conditions-description"
					*ngIf="batteryConditionNote?.description.length > 0">
					{{batteryConditionNote.description | translate}}
				</span>
				<span class="battery-conditions-title"
					*ngIf="batteryConditions[i].condition==batteryConditionsEnum.StoreLimitation">
					{{percentageLimitation}}%
				</span>
				<span class="battery-conditions-title"
					*ngIf="batteryConditionNote?.description1.length > 0">
					{{batteryConditionNote.description1 | translate}}
				</span>
				<span class="battery-conditions-description"
					*ngIf="batteryConditionNote?.description2.length > 0">
					{{batteryConditionNote.description2 | translate}}
				</span>
			</div>
		</div>
		<div class="feature-note p-2 mt-2"
			*ngIf="chargeThresholdInfo?.isOn">
			<div class="row">
				<p>
					<span style="font-weight: bold">
						{{'device.deviceSettings.batteryGauge.thresholdNote.note'  | translate}}
					</span>
					<span>
						{{'device.deviceSettings.batteryGauge.thresholdNote.note1'  | translate}}
						{{chargeThresholdInfo.stopValue}}%
					</span>
				</p>
				<!-- TODO: uncomment in dual battery implementation story -->

				<!-- <span>
					{{'device.deviceSettings.batteryGauge.thresholdNote.note1'  | translate}}
					{{'device.deviceSettings.batteryGauge.thresholdNote.note3'  | translate}}
				</span>
				<span *ngIf="chargeThresholdInfo.length>1">{{chargeThresholdBatteries[0]}}</span>
				<span>
					{{'device.deviceSettings.batteryGauge.thresholdNote.note2'  | translate}}
					{{chargeThresholdInfo[chargeThresholdBatteries[0]-1].stopValue}}%
				</span>
				<span *ngIf="chargeThresholdBatteries.length>1">
					{{'device.deviceSettings.batteryGauge.thresholdNote.note4'  | translate}}
					{{'device.deviceSettings.batteryGauge.thresholdNote.note3'  | translate}}
					{{chargeThresholdBatteries[1]}}
					<span>
						{{'device.deviceSettings.batteryGauge.thresholdNote.note2'  | translate}}{{chargeThresholdInfo[chargeThresholdBatteries[1]-1].stopValue}}%
					</span>
				</span> -->
				<!-- <a href="javascript:void()">
						{{'device.smartAssist.intelligentSecurity.WindowsLink.goToWindowsHello' | translate}}
					</a> -->
			</div>
		</div>

		<div class="pt-4 text-center">
			<button type="button"
				vtrMetrics
				metricsItem="see battery details"
				metricsParent="battery-gauge"
				metricsEvent="itemClick"
				class="btn btn-primary btn-block btn-lg battery-detail-button text-uppercase"
				(click)="showDetailModal(batteryDetail)"
				[disabled]="isBatteryDetailsBtnDisabled">
				{{'device.deviceSettings.batteryGauge.button' | translate }}
			</button>
		</div>
	</div>
</div>
