<div class="vtr-menu-main">
	<nav class="navbar navbar-expand-xl pr-0">
		<div *ngIf="!deviceService.isGaming"
			class="navbar-brand pt-0">
			<a vtrMetrics
				routerLinkActive="link-active"
				[routerLinkActiveOptions]="items[0].routerLinkActiveOptions"
				[metricsEvent]="items[0].metricsEvent"
				[metricsParent]="items[0].metricsParent"
				[metricsItem]="items[0].metricsItem"
				routerLink="/{{items.path}}">
				<img [src]="'../../../assets/icons/Vantage_L_logo.svg'|svgInline|async"
					alt="L" />
			</a>
		</div>
		<div *ngIf="deviceService.isGaming"
			class="navbar-brand pt-0">
			<img src="../../../assets/images/gaming/gaming-logo-small.png"
				alt="L" />
		</div>
		<div class="navbar-text clearfix">
			<span *ngIf="appVersion && configService.appBrand && configService.appName">
				<div class="app-title">{{configService.appBrand}}
					<span class="app-name">{{configService.appName}}</span>
					<span class="app-version">{{'(v'+appVersion+')'}}</span>
				</div>
			</span>
			<vtr-spinner *ngIf="!(deviceModel)"> </vtr-spinner>
			<span *ngIf="deviceModel">
				<div class="device-type">{{deviceModel}}</div>
			</span>

		</div>
		<button class="navbar-toggler"
			type="button"
			(click)="toggleMenu($event)">
			<span class="navbar-toggler-icon">
				<fa-icon [icon]="['fas', 'bars']"></fa-icon>
			</span>
			<!-- <fa-icon [icon]="['fas', 'bars']">
			</fa-icon> -->
		</button>
		<div class="collapse navbar-collapse"
			#menuTarget
			[ngClass]="{'show':showMenu}">
			<ul class="navbar-nav ml-auto">
				<ng-container *ngFor="let item of items; let i=index">
					<li *ngIf="item.subitems.length===0&&item.id!=='user'&&showItem(item)"
						class="nav-item">
						<a class="nav-link {{item.id}}"
							vtrMetrics
							[metricsEvent]="item.metricsEvent"
							[metricsParent]="item.metricsParent"
							[metricsItem]="item.metricsItem"
							routerLink="/{{item.path}}"
							routerLinkActive="active"
							(click)="showMenu = false">
							<fa-icon *ngIf="item.icon[0]!=='icomoon'"
								[icon]="item.icon"
								class="fa-icon"></fa-icon>
							<span *ngIf="item.icon[0]==='icomoon'"
								[ngClass]="['navbar-icon',item.icon[0],item.icon[1]]"></span>
							{{item.label}}
						</a>
					</li>
					<li *ngIf="item.subitems.length>0&&item.id!=='user'&&showItem(item)"
						class="nav-item dropdown"
						[ngClass]="{'active': isParentActive(item)}">
						<a class="nav-link dropdown-toggle {{item.id}}"
							vtrMetrics
							[metricsEvent]="item.metricsEvent"
							[metricsParent]="item.metricsParent"
							[metricsItem]="item.metricsItem"
							routerLink="/{{item.path}}"
							routerLinkActive="active"
							id="navbarDropdown"
							role="button"
							data-toggle="dropdown"
							aria-haspopup="true"
							aria-expanded="false"
							(click)="showMenu = false">
							<fa-icon [icon]="item.icon"
								class="fa-icon"></fa-icon>
							{{item.label}}
						</a>
						<div class="dropdown-menu"
							aria-labelledby="navbarDropdown">
							<fa-icon [icon]="['fas', 'square']"
								class="menu-pointer"></fa-icon>
							<span *ngFor="let subitem of item.subitems; let ii=index">
								<a *ngIf="subitem.externallink"
									vtrMetrics
									routerLinkActive="link-active"
									[routerLinkActiveOptions]="subitem.routerLinkActiveOptions"
									[metricsEvent]="subitem.metricsEvent"
									[metricsParent]="subitem.metricsParent"
									[metricsItem]="subitem.metricsItem"
									class="dropdown-item link"
									target="_blank"
									(click)="showMenu = false; openExternalLink(subitem.path)">{{subitem.label | translate}}</a>
								<a *ngIf="!subitem.externallink && subitem.path==='support'"
									vtrMetrics
									routerLinkActive="link-active"
									[routerLinkActiveOptions]="subitem.routerLinkActiveOptions"
									[metricsEvent]="subitem.metricsEvent"
									[metricsParent]="subitem.metricsParent"
									[metricsItem]="subitem.metricsItem"
									class="dropdown-item link"
									routerLink="{{subitem.path}}"
									(click)="showMenu = false">{{subitem.label | translate}}</a>
								<a *ngIf="!subitem.externallink  && subitem.path!=='support'"
									vtrMetrics
									routerLinkActive="link-active"
									[routerLinkActiveOptions]="subitem.routerLinkActiveOptions"
									[metricsEvent]="subitem.metricsEvent"
									[metricsParent]="subitem.metricsParent"
									[metricsItem]="subitem.metricsItem"
									class="dropdown-item link"
									routerLink="/{{item.path}}/{{subitem.path}}"
									(click)="showMenu = false">{{subitem.label | translate}}</a>
							</span>

						</div>
					</li>
					<li *ngIf="item.id==='user'"
						class="nav-item dropdown">
						<!-- <a class="nav-link dropdown-toggle {{item.id}}"
							routerLink="/{{item.path}}"
							routerLinkActive="active"
							id="navbarDropdown"
							role="button"
							data-toggle="dropdown"
							aria-haspopup="true"
							aria-expanded="false">
							<div class="user-initials">
								{{userService.initials}}
							</div>
						</a> -->

						<a class="nav-link {{item.id}}"
							id="navbarDropdown"
							*ngIf="userService.isLenovoIdSupported()"
							[ngClass]="{'dropdown-toggle': true}"
							role="button"
							data-toggle="dropdown"
							aria-haspopup="true"
							aria-expanded="false"
							(click)="showMenu = false">
							<div class="user-initials">
								{{deviceService.isArm || userService.starter ? 'L' : userService.initials }}
							</div>
						</a>
						<div class="dropdown-menu {{item.id}}"
							style="min-width: 22.5rem"
							id="navbarDropdownMenu"
							aria-labelledby="navbarDropdown">
							<div class="dropdown-item"
								*ngIf="!deviceService.isArm">{{'lenovoId.helloUser' | translate:{firstName:firstName} }}
							</div>
							<a vtrMetrics
								[metricsEvent]="item.metricsEvent"
								[metricsParent]="item.metricsParent"
								metricsItem="SettingsButton"
								class="dropdown-item link"
								href="javascript:void(0)"
								routerLink="settings"
								(click)="showMenu = false">{{ 'settings.preferenceSettings' | translate }}</a>
							<a *ngIf="!deviceService.isArm && !userService.auth && !userService.starter"
								vtrMetrics
								[metricsEvent]="item.metricsEvent"
								[metricsParent]="item.metricsParent"
								metricsItem="LenovoIdSignInButton"
								class="dropdown-item link"
								href="javascript:void(0)"
								(click)="OpenLenovoId('NavigationLenovoAccount.Submenu'); showMenu = false">{{'lenovoId.login' | translate}}</a>
							<a *ngIf="!deviceService.isArm && !userService.auth && userService.starter"
								vtrMetrics
								[metricsEvent]="item.metricsEvent"
								[metricsParent]="item.metricsParent"
								metricsItem="LenovoIdStarterIdButton"
								class="dropdown-item link"
								href="javascript:void(0)"
								(click)="OpenLenovoId('NavigationLenovoAccount.Submenu'); showMenu = false">{{'lenovoId.unlockExclusives' | translate}}</a>
							<a *ngIf="!deviceService.isArm && userService.auth"
								vtrMetrics
								[metricsEvent]="item.metricsEvent"
								[metricsParent]="item.metricsParent"
								metricsItem="LenovoIdSignOutButton"
								class="dropdown-item link"
								href="javascript:void(0)"
								(click)="onLogout(); showMenu = false">{{'lenovoId.logout' | translate}}</a>
						</div>
					</li>
				</ng-container>
			</ul>
		</div>
	</nav>
</div>
