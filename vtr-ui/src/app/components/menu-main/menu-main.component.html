<div class="vtr-menu-main">
	<nav class="navbar navbar-expand-xl pr-0">
		<div *ngIf="!deviceService.isGaming && !isGamingHome"
			class="navbar-brand pt-0">
			<a vtrMetrics
				*ngIf="items.length>0"
				id="menu-main-lnk-l-logo"
				attr.aria-label="menu-main-lnk-l-logo"
				routerLinkActive="link-active"
				[routerLinkActiveOptions]="items[0].routerLinkActiveOptions"
				[metricsEvent]="items[0].metricsEvent"
				[metricsParent]="items[0].metricsParent"
				[metricsItem]="items[0].metricsItem"
				routerLink="/dashboard">
				<img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjIsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHZpZXdCb3g9IjAgMCAyNTYgMjU2IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAyNTYgMjU2OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDojMjdBREQ3O30NCgkuc3Qxe2ZpbGw6IzIxMzA2NDt9DQoJLnN0MntmaWxsOiNGRkZGRkY7fQ0KPC9zdHlsZT4NCjxnPg0KCTxyZWN0IHk9IjAiIGNsYXNzPSJzdDAiIHdpZHRoPSIyNTYiIGhlaWdodD0iMjU2Ii8+DQoJPGc+DQoJCTxwb2x5Z29uIGNsYXNzPSJzdDEiIHBvaW50cz0iNTguMiwyMTEuNiA4OC41LDE5Mi42IDE5NC44LDE5Mi42IDE5NC44LDE5NS41IAkJIi8+DQoJCTxwb2x5Z29uIGNsYXNzPSJzdDEiIHBvaW50cz0iNTguMiwyMTEuNiA4OC41LDE5Mi42IDg4LjUsMzkuNiA4Ni4zLDM5LjYgCQkiLz4NCgkJPHBvbHlnb24gY2xhc3M9InN0MiIgcG9pbnRzPSIxOTQuOCwxNjIuOSAxMjEuMywxNjIuOSAxMjEuMywzOS42IDg4LjUsMzkuNiA4OC41LDE5Mi42IDE5NC44LDE5Mi42IAkJIi8+DQoJPC9nPg0KPC9nPg0KPC9zdmc+DQo="
					alt="L" />
			</a>
		</div>
		<div *ngIf="deviceService.isGaming || loadMenuItem.hideMenus"
			class="navbar-brand pt-0">

			<img *ngIf="isGamingHome"
				src="../../../assets/images/gaming/gaming-logo-small.png"
				alt="L" />

			<a id="menu-main-lnk-gaming-logo"
				attr.aria-label="menu-main-lnk-gaming-logo"
				*ngIf="!isGamingHome"
				vtrMetrics
				routerLinkActive="link-active"
				[routerLinkActiveOptions]="items[0].routerLinkActiveOptions"
				[metricsEvent]="items[0].metricsEvent"
				[metricsParent]="items[0].metricsParent"
				[metricsItem]="items[0].metricsItem"
				routerLink="/{{items[0].path}}">
				<img src="../../../assets/images/gaming/gaming-logo-small.png"
					alt="L" />
			</a>

		</div>
		<div class="navbar-text clearfix">
			<span *ngIf="configService.appBrand && configService.appName">
				<div class="app-title">{{configService.appBrand}}
					<span class="app-name">{{configService.appName}}</span>
				</div>
			</span>
			<span>
				<div class="device-type">
					<span *ngIf="!machineFamilyName">&nbsp;</span>
					<span *ngIf="machineFamilyName">{{machineFamilyName}}</span>
					<vtr-ui-header-warranty *ngIf="machineFamilyName"
						[pageParent]="items[0].metricsParent"></vtr-ui-header-warranty>
				</div>
			</span>

		</div>
		<button id="menu-main-btn-navbar-toggler"
			aria-label="menu-main-btn-navbar-toggler"
			class="navbar-toggler"
			type="button"
			(click)="toggleMenu($event)">
			<span class="navbar-toggler-icon">
				<fa-icon [icon]="['fas', 'bars']"></fa-icon>
			</span>
			<!-- <fa-icon [icon]="['fas', 'bars']">
			</fa-icon> -->
		</button>
		<div class="collapse navbar-collapse"
			*ngIf="!loadMenuItem.hideMenus"
			#menuTarget
			[ngClass]="{'show':showMenu}">
			<ul class="navbar-nav ml-auto"
				*ngIf="loadMenuItem?.firstRunDate?.length || !deviceService.isShellAvailable">
				<ng-container *ngFor="let item of items; let i=index">
					<li *ngIf="item.subitems.length===0&&item.id!=='user'&&showItem(item)"
						class="nav-item">
						<a class="nav-link {{item.id}}"
							[ngClass]="{'beta-item':item.beta}"
							vtrMetrics
							id="menu-main-nav-lnk-{{item.id}}"
							attr.aria-label="menu-main-nav-lnk-{{item.id}}"
							[metricsEvent]="item.metricsEvent"
							[metricsParent]="item.metricsParent"
							[metricsItem]="item.metricsItem"
							routerLink="/{{item.path}}"
							routerLinkActive="active"
							(click)="showMenu = false"
							*ngIf="item.label | translate">
							<div class="icon">
								<fa-icon *ngIf="item.icon[0]!=='icomoon'"
									[icon]="item.icon"
									class="fa-icon"></fa-icon>
								<span *ngIf="item.icon[0]==='icomoon'"
									[ngClass]="['navbar-icon',item.icon[0],item.icon[1]]"></span>
							</div>

							{{item.label | translate}}
							<span *ngIf="item.beta" class="beta">Beta</span>
						</a>
					</li>
					<li *ngIf="item.subitems.length>0&&item.id!=='user'&&showItem(item)"
						class="nav-item dropdown"
						[ngClass]="{'active': isParentActive(item)}">
						<a class="nav-link dropdown-toggle {{item.id}}"
							[ngClass]="{'beta-item':item.beta}"
							vtrMetrics
							id="menu-main-nav-lnk-dropdown-toggle-{{item.id}}"
							attr.aria-label="menu-main-nav-lnk-dropdown-toggle-{{item.id}}"
							[metricsEvent]="item.metricsEvent"
							[metricsParent]="item.metricsParent"
							[metricsItem]="item.metricsItem"
							routerLink="/{{item.path}}"
							routerLinkActive="active"
							id="navbarDropdown"
							role="button"
							data-toggle="dropdown"
							aria-haspopup="true"
							aria-expanded="false"
							(click)="showMenu = false"
							*ngIf="item.label | translate">
							<div class="icon">
								<fa-icon [icon]="item.icon"
									class="fa-icon"></fa-icon>
							</div>
							{{item.label | translate}}
							<span *ngIf="item.beta" class="beta">Beta</span>
						</a>
						<div class="dropdown-menu"
							aria-labelledby="navbarDropdown">
							<fa-icon [icon]="['fas', 'square']"
								class="menu-pointer"></fa-icon>
							<span *ngFor="let subitem of item.subitems; let ii=index">
								<a *ngIf="subitem.externallink"
									vtrMetrics
									id="menu-main-nav-lnk-dropdown-menu-external-{{item.id}}-{{ii}}"
									attr.aria-label="menu-main-nav-lnk-dropdown-menu-external-{{item.id}}-{{ii}}"
									routerLinkActive="link-active"
									[routerLinkActiveOptions]="subitem.routerLinkActiveOptions"
									[metricsEvent]="subitem.metricsEvent"
									[metricsParent]="subitem.metricsParent"
									[metricsItem]="subitem.metricsItem"
									class="dropdown-item link"
									target="_blank"
									rel="noopener"
									href="javascript:void(0)"
									(click)="showMenu = false; openExternalLink(subitem.path)">{{subitem.label | translate}}</a>
								<a *ngIf="!subitem.externallink && subitem.path==='support'"
									vtrMetrics
									id="menu-main-nav-lnk-dropdown-menu-support-{{item.id}}-{{ii}}"
									attr.aria-label="menu-main-nav-lnk-dropdown-menu-support-{{item.id}}-{{ii}}"
									routerLinkActive="link-active"
									[routerLinkActiveOptions]="subitem.routerLinkActiveOptions"
									[metricsEvent]="subitem.metricsEvent"
									[metricsParent]="subitem.metricsParent"
									[metricsItem]="subitem.metricsItem"
									class="dropdown-item link"
									routerLink="{{subitem.path}}"
									(click)="showMenu = false">{{subitem.label | translate}}</a>
								<a *ngIf="!subitem.externallink  && subitem.path!=='support'"
									vtrMetrics
									id="menu-main-nav-lnk-dropdown-menu-{{item.id}}-{{ii}}"
									attr.aria-label="menu-main-nav-lnk-dropdown-menu-{{item.id}}-{{ii}}"
									routerLinkActive="link-active"
									[routerLinkActiveOptions]="subitem.routerLinkActiveOptions"
									[metricsEvent]="subitem.metricsEvent"
									[metricsParent]="subitem.metricsParent"
									[metricsItem]="subitem.metricsItem"
									class="dropdown-item link"
									routerLink="/{{item.path}}/{{subitem.path}}"
									(click)="showMenu = false">{{subitem.label | translate}}</a>
							</span>

						</div>
					</li>
					<li *ngIf="item.id==='user'"
						class="nav-item dropdown">
						<!-- <a class="nav-link dropdown-toggle {{item.id}}"
							routerLink="/{{item.path}}"
							routerLinkActive="active"
							id="navbarDropdown"
							role="button"
							data-toggle="dropdown"
							aria-haspopup="true"
							aria-expanded="false">
							<div class="user-initials">
								{{userService.initials}}
							</div>
						</a> -->

						<a class="nav-link {{item.id}}"
							id="navbarDropdown"
							attr.aria-label="navbarDropdown"
							*ngIf="userService.isLenovoIdSupported()"
							[ngClass]="{'dropdown-toggle': true}"
							role="button"
							data-toggle="dropdown"
							aria-haspopup="true"
							aria-expanded="false"
							(click)="showMenu = false">
							<div class="user-initials">
								{{deviceService.isArm || userService.starter || !commonService.isOnline ? 'L' : userService.initials }}
							</div>
						</a>
						<div class="dropdown-menu {{item.id}} dropdown-menu-id"
							id="navbarDropdownMenu"
							aria-labelledby="navbarDropdown">
							<div class="dropdown-item"
								*ngIf="!deviceService.isArm && commonService.isOnline && userService.isLenovoIdSupported()">
								{{'lenovoId.helloUser' | translate:{firstName:userService.firstName} }}
							</div>
							<a *ngIf="!deviceService.isSMode && !deviceService.isGaming && modernPreloadService.IsEntitled"
								vtrMetrics
								id="menu-main-lnk-open-modern-preload"
								attr.aria-label="menu-main-lnk-open-modern-preload"
								[metricsEvent]="item.metricsEvent"
								[metricsParent]="item.metricsParent"
								metricsItem="ModernPreloadButton"
								class="dropdown-item link"
								href="javascript:void(0)"
								(click)="openModernPreloadModal()">My Software</a>
							<a vtrMetrics
								id="menu-main-lnk-open-preference"
								attr.aria-label="menu-main-lnk-open-preference"
								[metricsEvent]="item.metricsEvent"
								[metricsParent]="item.metricsParent"
								metricsItem="SettingsButton"
								class="dropdown-item link"
								href="javascript:void(0)"
								routerLink="settings"
								(click)="showMenu = false">{{ 'settings.preferenceSettings' | translate }}</a>
							<a *ngIf="!deviceService.isArm && !userService.auth && !userService.starter && commonService.isOnline && userService.isLenovoIdSupported()"
								vtrMetrics
								id="menu-main-lnk-open-lenovoid-login"
								attr.aria-label="menu-main-lnk-open-lenovoid-login"
								[metricsEvent]="item.metricsEvent"
								[metricsParent]="item.metricsParent"
								metricsItem="LenovoIdSignInButton"
								class="dropdown-item link"
								href="javascript:void(0)"
								(click)="OpenLenovoId('NavigationLenovoAccount.Submenu'); showMenu = false">{{'lenovoId.login' | translate}}</a>
							<a *ngIf="!deviceService.isArm && !userService.auth && userService.starter && commonService.isOnline && userService.isLenovoIdSupported()"
								vtrMetrics
								id="menu-main-lnk-open-lenovoid-unlock"
								attr.aria-label="menu-main-lnk-open-lenovoid-unlock"
								[metricsEvent]="item.metricsEvent"
								[metricsParent]="item.metricsParent"
								metricsItem="LenovoIdStarterIdButton"
								class="dropdown-item link"
								href="javascript:void(0)"
								(click)="OpenLenovoId('NavigationLenovoAccount.Submenu'); showMenu = false">{{'lenovoId.unlockExclusives' | translate}}</a>
							<a *ngIf="!deviceService.isArm && userService.auth && commonService.isOnline && userService.isLenovoIdSupported()"
								vtrMetrics
								id="menu-main-lnk-user-logout"
								attr.aria-label="menu-main-lnk-user-logout"
								[metricsEvent]="item.metricsEvent"
								[metricsParent]="item.metricsParent"
								metricsItem="LenovoIdSignOutButton"
								class="dropdown-item link"
								href="javascript:void(0)"
								(click)="onLogout(); showMenu = false">{{'lenovoId.logout' | translate}}</a>
						</div>
					</li>
					<div *ngIf="item.id==='home-security'"
						class="d-none">
						<img *ngFor="let i of preloadImages"
							[src]="i"
							alt="">
					</div>
				</ng-container>
			</ul>
		</div>
	</nav>
</div>
