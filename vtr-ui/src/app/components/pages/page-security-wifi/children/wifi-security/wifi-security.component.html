<div class="wifi-security">
	<div class="container-fluid p-40 security-card">
		<div class="row">
			<div class="col">
				<div class="heading">{{'security.wifisecurity.container.title' | translate}}</div>
			</div>
			<div class="pull right"><img class="coronet-logo"
					[src]=" '../../../../assets/images/coronet-logo.svg' | svgInline | async" /></div>
		</div>
		<div class="row mt-20 no-gutters">
			<div class="col-12">
				<div class="wifiSecurity">
					<div class="card"
						[ngClass]="{'collapsed': isCollapsed && data.isLWSEnabled}">
						<div class="card-header flex align-items-center"
							id="wifiSecurity">
							<div class="row no-gutters">
								<div class="col-sm-6 subHeading align-items-center">
									<span class="circle green" *ngIf="data.isLWSEnabled">
										<fa-icon [icon]="['fas', 'check']"></fa-icon>
									</span>
									<span class="circle red" *ngIf="data.isLWSEnabled===false">
										<fa-icon [icon]="['fas', 'times']"></fa-icon>
									</span>
									<div *ngIf="data.isLWSEnabled===undefined"
										class="loading">
										<div class="spinner-border text-primary progress-spinner"
											role="status"></div>
									</div>
									<h3 class="mb-0 wifisecurity-container-name" title="{{'security.wifisecurity.container.name' | translate}}" >{{'security.wifisecurity.container.name' | translate}}
									</h3>
									<h3 class="wifisecurity-container-enable"><span class="badge badge-pill badge-danger button-green line-height-2-5 p-0 pl-3 pr-3"
										title="{{'security.wifisecurity.container.enable' | translate}}" 
										*ngIf="data.isLWSEnabled">{{'security.wifisecurity.container.enable' | translate}}</span>
										<span class="badge badge-pill badge-danger button-red line-height-2-5 p-0 pl-3 pr-3" 
										title="{{'security.wifisecurity.container.disable' | translate}}"
										*ngIf="data.isLWSEnabled===false">{{'security.wifisecurity.container.disable' | translate}}</span>
									</h3>
								</div>
								<div class="col-sm-6 align-items-center text-right sm-device-responsive">
									<vtr-ui-switch-onoff id="sa-ws-btn-switchstatus"
										aria-label="sa-ws-btn-switchstatus"
										[ngClass]="{'switch-disable': isDisableToggle() || cancelClick}"
										*ngIf="data.wifiSecurity.state !== 'never-used'"
										name="wifisecurity"
										[value]="data.isLWSEnabled"
										[data]="data"
										[name]="'wifiSecurity'"
										[disabled]="switchDisabled || cancelClick"
										[isSwitchDisable]="cancelClick"></vtr-ui-switch-onoff>
									<div class="collapse-control" 
										id="sa-ws-lnk-collapsecontrol"
										aria-label="sa-ws-lnk-collapsecontrol"
										(click)="$event.preventDefault();isCollapsed=!isCollapsed;"
										[hidden]="!data.isLWSEnabled">
										<div class="d-flex" vtrMetrics
											metricsItem="collapseWiFiHistory"
											metricsEvent="featureClick"
											data-toggle="collapse"
											data-target="#wifi-collapse"
											aria-label="sa-ws-btn-lessinfo"
											aria-expanded="false"
											aria-controls="wifi-collapse"
											*ngIf="isShowMore===false"
											(click)="isShowMore=true">
											<button id="sa-ws-btn-lessinfo" 
												class="btn btn-link collapse-text p-0"
												type="button"
												title="{{'security.wifisecurity.container.less' | translate}}">
												{{'security.wifisecurity.container.less' | translate}} </button>
											<fa-icon
												[icon]="['fas', 'chevron-up']"
												class="pl-3">
											</fa-icon>
										</div>
										<div class="d-flex" vtrMetrics
											metricsItem="expandWiFiHistory"
											metricsEvent="featureClick"
											data-toggle="collapse"
											data-target="#wifi-collapse"
											aria-label="sa-ws-btn-moreinfo"
											aria-expanded="false"
											aria-controls="wifi-collapse"
											*ngIf="isShowMore===true"
											(click)="isShowMore=false">
											<button id="sa-ws-btn-moreinfo"
												class="btn btn-link collapse-text p-0"
												type="button"
												title="{{'security.wifisecurity.container.more' | translate}}">
												{{'security.wifisecurity.container.more' | translate}} </button>
												<fa-icon
													[icon]="['fas', 'chevron-down']"
													class="pl-3">
												</fa-icon>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div id="wifi-collapse"
						class="collapse show"
						*ngIf="data.isLWSEnabled && isShowMore===false">
						<div class="card-body">
							<div class="content">
								<div class="cardTitle">
									<h3>{{'security.wifisecurity.container.networkHistory' | translate}}</h3>
								</div>
								<div class="cardBody">
									<div class="row no-gutters wifi-card">
										<div *ngFor="let history of data.historys"
											class="col-sm-12 col-md-12 col-lg-6 col-xl-6 pl-5 wifi">
											<div class="media pt-3 border-0">
												<div class="status-icon">
													<span class="fa-stack fa-3x">
														<fa-icon [icon]="['fal', 'wifi']"
															class="menu-pointer"></fa-icon>
														<span class="circle"
															[ngClass]="{'green':history.good == 0,'red':history.good != 0}">
															<fa-icon [icon]="['fal', 'check']"
																*ngIf="history.good == 0"></fa-icon>
															<fa-icon [icon]="['fal', 'times']"
																*ngIf="history.good != 0"></fa-icon>
														</span>
													</span>
												</div>
												<div class="connection-name media-body border-0">
													<h5 class="mt-0"
														title="{{history.ssid}}">{{history.ssid}}</h5>
													<small class="connection-status text-muted">
														{{'security.wifisecurity.container.connect' | translate}}
														{{history.info}}
													</small>
												</div>
											</div>
										</div>
									</div>
								</div>
								<div class="card-foot"
									*ngIf="data.hasMore">
									<a id="sa-ws-lnk-wh-showmore"
										aria-label="sa-ws-lnk-wh-showmore"
										vtrMetrics
										metricsItem="showMoreWiFiHistory"
										metricsEvent="featureClick"
										class="show-more"
										href="#"
										(click)="clickShowMore()"
										*ngIf="isShowMoreLink">{{'security.wifisecurity.container.showmore' | translate}}</a>
									<a id="sa-ws-lnk-wh-showless"
										aria-label="sa-ws-lnk-wh-showless"
										vtrMetrics
										metricsItem="showLessWiFiHistory"
										metricsEvent="featureClick"
										class="show-more"
										href="#"
										(click)="clickShowMore()"
										*ngIf="!isShowMoreLink">{{'security.wifisecurity.container.showless'| translate}}</a>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="row threat-locator"
			*ngIf="(region !== 'CN') && (!data.isLWSEnabled || isShowMore===false)">
			<div class="col">
				<div class="threat-locator-container">
					<div class="row">
						<div class="col-sm-12 col-md-12 col-lg-8">
							<div class="sub-heading-2">Threat locator</div>
							<div class="text-regular">
								{{'security.wifisecurity.threatlocator.describe' | translate}}
							</div>
						</div>
						<div class="col-sm-12 col-md-12 col-lg-4 col-check-location">
							<div class="button-box">
								<vtr-ui-button id="sa-ws-btn-openlocator"
									aria-label="sa-ws-btn-openlocator"
									metricsEvent="featureClick"
									metricsItem="checkYourLocation"
									[isDisabled]="locatorButtonDisable"
									(click)="openThreatLocator()"
									[label]="'security.wifisecurity.threatlocator.button' | translate"></vtr-ui-button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="row mt-40"
			*ngIf="!data.isLWSEnabled">
			<div class="col-12" [ngClass]="{'col-lg-7':data.wifiSecurity.state==='never-used'}">
				<div class="text-regular">{{ 'security.wifisecurity.container.disableDecribe' | translate }}</div>
			</div>
			<div class="col-sm-12 col-md-12 col-lg-5 text-right col-check-use-state" *ngIf="data.wifiSecurity.state==='never-used'">
				<vtr-ui-button id="sa-ws-btn-enablewifisecurity"
					aria-label="sa-ws-btn-enablewifisecurity"
					metricsItem="enableWifiSecurity"
					metricsEvent="featureClick"
					(click)="enableWifiSecurity()"
					[label]="'security.wifisecurity.container.button' | translate"></vtr-ui-button>
			</div>
		</div>
	</div>
</div>
