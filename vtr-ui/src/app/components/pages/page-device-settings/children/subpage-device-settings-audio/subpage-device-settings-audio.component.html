<div class="subpage-device-settings-audio vtr-subpage">
	<div class="row">
		<div class="col">
			<vtr-ui-header-subpage [items]="headerMenuItems"
				[title]="title | translate"
				[menuTitle]="'device.deviceSettings.power.jumpto.title' | translate"
				[caption]="'device.deviceSettings.audio.description' | translate"
				[textId]="'ds-audio'">
			</vtr-ui-header-subpage>
		</div>
	</div>
	<div class="row">
		<div class="col">
			<div class="row pt-5 smart-settings-card"
				*ngIf="dolbyModeResponse.available"
				id="audio">
				<div class="col-12 mx-auto">
					<vtr-container-collapsible componentName="Audio SmartSettings"
						[tabIndex]="0"
						[vtrAppSearchScroller]="['search-audio-smart']"
						[cardTitle]="'device.deviceSettings.audio.audioSmartsettings.title' | translate"
						[isCollapsed]="false"
						[allowCollapse]="true"
						[theme]="'white'"
						[collapseLinkId]="'audio-smart-settings'">
						<ul class="list-group list-group-flush"
							role="list"
							id="audio-dolby-ul">
							<li role="listitem"
								id="audio-dolby-li">
								<vtr-ui-row-switch componentName="Automatic Dolby Audio Settings"
									[title]="'device.deviceSettings.audio.audioSmartsettings.dolby.title' | translate"
									componentName="Automatic Dolby Audio Settings"
									[caption]="'device.deviceSettings.audio.audioSmartsettings.dolby.description' | translate"
									[isSwitchVisible]="dolbyModeResponse.available"
									[leftIcon]="['icomoon', 'icomoon-LE-Dolby2x']"
									[rightIcon]=""
									[readMoreText]="''"
									[showChildContent]="true"
									[theme]="'white'"
									[tooltipText]=""
									(toggleOnOff)="onDolbyAudioToggleOnOff($event)"
									[isSwitchChecked]="dolbyModeResponse.isAudioProfileEnabled"
									[showLoaderState]="autoDolbyFeatureLoader"
									[switchId]="'audio-automatic-dolby'">
									<div class="row no-gutters tab-focus-white pl-5"
										*ngIf="dolbyModeResponse.isAudioProfileEnabled"
										aria-label="dolby audio more list, select using arrow keys">
										<vtr-ui-circle-radio-with-checkbox-list [groupName]="'dolby-mode-radio-group'"
											[sendMetrics]=true
											[isDisabled]="dolbyModeDisabled"
											(optionChange)="onDolbySettingRadioChange($event)"
											[radioDetails]="dolbyModesUIModel">
										</vtr-ui-circle-radio-with-checkbox-list>
									</div>
									<div class="audioDolbySub pl-5"
										id="audioDolbySub"
										*ngIf="dolbyModeResponse.isAudioProfileEnabled">
										<div class="checkbox voipCheckbox d-flex justify-content-start"
											id="audio-dolby-voip"
											*ngIf="voipStatus.available">
											<div id="audio-dolby-voip-checkbox">
												<vtr-ui-checkbox [componentId]="'audio-voip'"
													[isMetricsEnabled]=true
													[value]="voipStatus.status"
													[checked]="voipStatus.status"
													[disabled]='automaticAudioDisabled'
													[label]="'device.deviceSettings.audio.audioSmartsettings.dolby.automaticAudioMode.voIPMode.checkboxText' | translate"
													(toggle)='onVoipCheckboxChange($event)'>
												</vtr-ui-checkbox>
											</div>
											<div id="audio-dolby-voip-tip">
												<fa-icon id="audio-voip-tooltip_right_icon"
													class="right-icon"
													role="img"
													triggers="manual"
													placement="left"
													autoClose="false"
													[ngbTooltip]="tooltipRef"
													#rightToolTip1="ngbTooltip"
													autoClose="true"
													[icon]="['far', 'question-circle']"
													container="vtr-root"
													tooltipClass="vtr-tooltip"
													(click)="onRightIconClick(rightToolTip1, $event)"
													(keydown.enter)="onRightIconClick(rightToolTip1, $event)"
													tabindex="0"
													attr.aria-label="'Dolby audio voip tooltip, which reads:'+ {{'device.deviceSettings.audio.audioSmartsettings.dolby.automaticAudioMode.voIPMode.tooltip' | translate}}">
												</fa-icon>
												<ng-template #tooltipRef>
													<div id="voipTooltip"
														role="tooltip"
														attr.aria-label="{{'device.deviceSettings.audio.audioSmartsettings.dolby.automaticAudioMode.voIPMode.tooltip' | translate}}"
														[innerHTML]="'device.deviceSettings.audio.audioSmartsettings.dolby.automaticAudioMode.voIPMode.tooltip' | translate">
													</div>
												</ng-template>
											</div>
										</div>

										<div class="checkbox entertainmentCheckout d-flex justify-content-start"
											id="audio-dolby-entertainment"
											*ngIf="entertainmentStatus.available">
											<div id="audio-dolby-entertainment-checkbox">
												<vtr-ui-checkbox [componentId]="'entertainmentCheckbox'"
													[isMetricsEnabled]=true
													[value]="entertainmentStatus.status"
													[checked]="entertainmentStatus.status"
													[disabled]='automaticAudioDisabled'
													[label]="'device.deviceSettings.audio.audioSmartsettings.dolby.automaticAudioMode.entertainmentMode.checkboxText' | translate"
													(toggle)='onEntertainmentCheckboxChange($event)'>
												</vtr-ui-checkbox>
											</div>
											<div id="audio-dolby-entertainment-tip">
												<fa-icon id="entertainmentRightIcon"
													class="right-icon"
													role="img"
													triggers="manual"
													placement="left"
													autoClose="false"
													[ngbTooltip]="tooltipRef"
													#rightToolTip1="ngbTooltip"
													autoClose="true"
													[icon]="['far', 'question-circle']"
													container="vtr-root"
													tooltipClass="vtr-tooltip"
													(click)="onRightIconClick(rightToolTip1, $event)"
													(keydown.enter)="onRightIconClick(rightToolTip1, $event)"
													tabindex="0"
													[attr.aria-label]="'Dolby audio entertainment tooltip, which reads:'+ entertainmentTooltip">
												</fa-icon>
												<ng-template #tooltipRef>
													<div id="entertainmentTooltip"
														role="tooltip"
														attr.aria-label="{{'device.deviceSettings.audio.audioSmartsettings.dolby.automaticAudioMode.entertainmentMode.tooltip' | translate}}"
														[innerHTML]="'device.deviceSettings.audio.audioSmartsettings.dolby.automaticAudioMode.entertainmentMode.tooltip' | translate">
													</div>
												</ng-template>
											</div>
										</div>
									</div>
								</vtr-ui-row-switch>
							</li>
							<li class="common-li-padding"
								role="listitem"
								id="audio-eCourse-li"
								*ngIf='eCourseStatus.available'>
								<vtr-ui-row-switch
									[title]="'device.deviceSettings.audio.audioSmartsettings.eCourse.title' | translate"
									componentName="audio-eCourse"
									[caption]="'device.deviceSettings.audio.audioSmartsettings.eCourse.tooltip' | translate"
									[isSwitchVisible]='true'
									[leftIcon]="['icomoon', 'icomoon-eCourse']"
									[rightIcon]=""
									[readMoreText]="''"
									[showChildContent]="false"
									[theme]="'white'"
									[tooltipText]=""
									(toggleOnOff)="onToggleOfeCourseAutoOptimization($event)"
									[isSwitchChecked]="eCourseStatus.status"
									[showLoaderState]="eCourseLoader"
									[switchId]="'audio-eCourse'">
								</vtr-ui-row-switch>
							</li>
						</ul>
					</vtr-container-collapsible>
				</div>
			</div>
			<div class="row py-5 smart-settings-card"
				id="microphone">
				<div class="col-12 mx-auto container-card"
					*ngIf="microphoneProperties.available">
					<vtr-container-collapsible componentName="Microphone"
						[tabIndex]="0"
						[vtrAppSearchScroller]="['search-microphone']"
						[cardTitle]="'device.deviceSettings.audio.microphone.title' | translate"
						[isCollapsed]="false"
						[allowCollapse]="true"
						[theme]="'white'"
						[collapseLinkId]="'audio-microphone'">
						<vtr-widget-permission-note
							[noteTitle]="'device.deviceSettings.audio.microphone.note.title' | translate"
							[description]="'device.deviceSettings.audio.microphone.note.description' | translate"
							[path]="'ms-settings:privacy-microphone'"
							[linkId]="'audio-microphone-permission'"
							*ngIf="!microphoneProperties.permission">

						</vtr-widget-permission-note>
						<ul class="list-group list-group-flush"
							*ngIf="microphoneProperties.permission">
							<li class="microphone-on-off">
								<vtr-ui-row-switch [title]="'device.deviceSettings.audio.microphone.title' | translate"
									componentName="Microphone"
									[caption]=""
									[isSwitchVisible]=true
									[leftIcon]="['fal', 'microphone']"
									[readMoreText]="''"
									[showChildContent]="true"
									[theme]="'white'"
									[disabled]="!microphoneProperties.permission"
									(toggleOnOff)="onToggleOfMicrophone($event)"
									[isSwitchChecked]="microphoneProperties.muteDisabled"
									[showLoaderState]="microphoneLoader"
									[switchId]="'audio-microphone'">
								</vtr-ui-row-switch>
							</li>
							<li class="common-li-padding">
								<vtr-ui-row-switch
									[title]="'device.deviceSettings.audio.microphone.volume.title' | translate"
									componentName="MicrophoneVolume"
									[isSwitchVisible]=false
									[leftIcon]="['fal', 'microphone']"
									[rightIcon]=""
									[readMoreText]="''"
									[showChildContent]="true"
									[disabled]="!microphoneProperties.permission"
									[theme]="'white'"
									[switchId]="'audio-microphone-volume'">
									<div class="row">
										<div class="microphone-slider-margin"></div>
										<div class="col-11">
											<vtr-ui-custom-slider
												[minLegend]="'device.deviceSettings.audio.microphone.volume.options.silent' | translate"
												[maxLegend]="'device.deviceSettings.audio.microphone.volume.options.loud' | translate"
												[min]=0
												[max]=100
												[step]=1
												[value]="microphoneProperties.volume"
												(valueChange)="onMicrophoneVolumeChange($event)"
												[isDisabled]="!microphoneProperties.permission"
												[ariaLabel]="'microphone volume'"
												[sliderId]="'audio-microphone-volume'">
											</vtr-ui-custom-slider>
										</div>
										<div class="col-2"></div>
									</div>
								</vtr-ui-row-switch>
							</li>
							<div
								*ngIf="microphoneProperties?.currentMode && microphoneProperties?.currentMode!='NotSupported' && !isDTmachine">
								<li class="common-li-padding"
									*ngIf="microphoneProperties.keyboardNoiseSuppression != undefined">
									<vtr-ui-row-switch
										[title]="'device.deviceSettings.audio.microphone.suppress.title' | translate"
										componentName="Supress Keyboard noise"
										[caption]=""
										[isSwitchVisible]=true
										[leftIcon]="['fal', 'keyboard']"
										[rightIcon]="helpIcon"
										[readMoreText]="''"
										[showChildContent]="true"
										[theme]="'white'"
										[tooltipText]="'device.deviceSettings.audio.microphone.suppress.tooltip' | translate"
										(toggleOnOff)="onToggleOfSuppressKbdNoise($event)"
										[disabled]="microphoneProperties.disableEffect || microOptimizeModeResponse.current === 'VoiceRecognition'"
										[isSwitchChecked]="microphoneProperties.keyboardNoiseSuppression"
										[showLoaderState]="microphoneLoader"
										[switchId]="'audio-microphone-suppress'">
									</vtr-ui-row-switch>
								</li>
								<li class="common-li-padding"
									*ngIf="microphoneProperties.AEC != undefined">
									<vtr-ui-row-switch
										[title]="'device.deviceSettings.audio.microphone.acoustic.title' | translate"
										componentName="Acoustic Echo Cancellation"
										[caption]=""
										[isSwitchVisible]=true
										[leftIcon]="['icomoon', 'icomoon-LE-Acoustic-echo-cancellation2x']"
										[rightIcon]="helpIcon"
										[readMoreText]="''"
										[showChildContent]="true"
										[theme]="'white'"
										[tooltipText]="'device.deviceSettings.audio.microphone.acoustic.tooltip' | translate"
										(toggleOnOff)="setMicrophoneAEC($event)"
										[disabled]="microphoneProperties.disableEffect || microOptimizeModeResponse.current === 'VoiceRecognition'"
										[isSwitchChecked]="microphoneProperties.AEC"
										[showLoaderState]="microphoneLoader"
										[switchId]="'audio-microphone-acousticEcho'">
									</vtr-ui-row-switch>
								</li>
								<li class="common-li-padding"
									*ngIf="!isDTmachine && microOptimizeModeResponse && microOptimizeModeResponse.modes.length > 0">
									<vtr-ui-row-switch
										[title]="'device.deviceSettings.audio.microphone.optimize.title' | translate"
										componentName="Optimize my microphone for"
										[caption]="'device.deviceSettings.audio.microphone.optimize.tooltip' | translate"
										[isSwitchVisible]=false
										[leftIcon]="['fal', 'microphone']"
										[readMoreText]="''"
										[showChildContent]="true"
										[disabled]="microphoneProperties.disableEffect"
										[theme]="'white'"
										[isLastChild]="true"
										[switchId]="'audio-microphone-optimize'">
										<div class="row no-gutters tab-focus-white pl-4 ml-4"
											aria-label="optimize microphone options, select using arrow keys">
											<vtr-ui-circle-radio-with-checkbox-list
												[groupName]="'optimize-microphone-radio-group'"
												[sendMetrics]=true
												(optionChange)="onOptimizeModesRadioChange($event)"
												[radioDetails]="microphoneModesUIModel">
											</vtr-ui-circle-radio-with-checkbox-list>
										</div>
									</vtr-ui-row-switch>
								</li>
							</div>
						</ul>
					</vtr-container-collapsible>
				</div>
			</div>
		</div>
	</div>
</div>
