<div class="vtr-battery-gauge-reset">
	<div class="no-max-width">
		<vtr-ui-row-switch [title]="'device.deviceSettings.power.batterySettings.gaugeReset.title' | translate"
			[caption]="'device.deviceSettings.power.batterySettings.gaugeReset.description' | translate"
			[isSwitchVisible]="false"
			[showChildContent]="true"
			[leftIcon]="['fal', 'battery-full']"
			[isLastChild]='true'
			[switchId]="'ds-power-battery-batteryGaugeReset'">
			<div class="container-fluid">
				<div *ngIf="batteryService.gaugeResetInfo?.length>0">
					<div class="row pt-1"
						*ngFor="let battery of batteryService.gaugeResetInfo; let i=index;">
						<div class="col px-4">
							<h5 *ngIf="batteryService.gaugeResetInfo?.length==1"
								id="deviceSettings-batteryGauge-subtitle">
								{{'device.deviceSettings.batteryGauge.subtitle'| translate}}
							</h5>
							<h5 *ngIf="batteryService.gaugeResetInfo?.length>1"
								id="Battery-{{i+1}}-details">
								{{ headings[i] | translate }}
							</h5>
							<div class="battery-gauge-info py-3">
								<!-- Initial State Battery Gauge Reset -->
								<div>
									<div class="row">
										<div class="col-4 label-text"
											role="text"
											id="battery-barcode-title-{{i+1}}">
											{{ 'device.deviceSettings.power.batterySettings.gaugeReset.barCode' | translate}}
										</div>
										<div class="col-8 label-value"
											role="text"
											id="battery-barcode-value-{{i+1}}">{{battery.barCode}}</div>
									</div>
								</div>
								<!-- Battery Gauge Reset Progress -->
								<div *ngIf="battery.isResetRunning">
									<div class="row"
										*ngIf="battery.stage && battery.stageNum">
										<div class="col-4 label-text"
											role="text"
											id="batterySettings-gaugeReset-progress-title">
											{{ 'device.deviceSettings.power.batterySettings.gaugeReset.progress' | translate}}
										</div>
										<div class="col-8 label-value"
											*ngIf="battery.stage==1"
											role="text"
											id="batterySettings-gaugeReset-progressText1">
											{{'device.deviceSettings.power.batterySettings.gaugeReset.progressText1' | translate : { stage: battery.stage, stageNum: battery.stageNum } }}
										</div>
										<div class="col-8 label-value"
											*ngIf="battery.stage==2"
											id="batterySettings-gaugeReset-progressText2"
											role="text">
											{{'device.deviceSettings.power.batterySettings.gaugeReset.progressText2' | translate : { stage: battery.stage, stageNum: battery.stageNum } }}
										</div>
										<div class="col-8 label-value"
											*ngIf="battery.stage==3"
											id="batterySettings-gaugeReset-progressText3"
											role="text">
											{{'device.deviceSettings.power.batterySettings.gaugeReset.progressText3' | translate : { stage: battery.stage, stageNum: battery.stageNum } }}
										</div>
									</div>
									<div class="row"
										*ngIf="!(batteryService.remainingPercentages[battery.batteryNum - 1]===0)">
										<div class="col-4 label-text"
											id="batterySettings-gaugeReset-remaining-title"
											role="text">
											{{ 'device.deviceSettings.power.batterySettings.gaugeReset.remaining' | translate}}
										</div>
										<div class="col-8 label-value"
											id="batterySettings-gaugeReset-remainingPercentage-value"
											role="text">
											{{batteryService.remainingPercentages[battery.batteryNum - 1]}}<span>%</span>
										</div>
									</div>
									<div class="row"
										*ngIf="battery.startTime">
										<div class="col-4 label-text"
											role="text"
											id="batterySettings-gaugeReset-startTime-title">
											{{ 'device.deviceSettings.power.batterySettings.gaugeReset.startTime' | translate}}
										</div>

										<div class="col-8 label-value"
											*ngIf="is12HrsFormat"
											role="text"
											id="battery-startTime-value-12hrs-format">
											{{battery.startTime | date : 'M/d/yyyy h:mm:ss '}}
											{{startTimeAbbreviated[i] | translate}}
										</div>
										<div class="col-8 label-value"
											*ngIf="!is12HrsFormat"
											role="text"
											id="battery-startTime-value-not12hrs-format">
											{{battery.startTime | date : 'M/d/yyyy H:mm:ss '}}
										</div>
									</div>
								</div>

								<!-- Last Battery Gauge reset result -->
								<div *ngIf="!battery.isResetRunning">
									<div class="row"
										*ngIf="battery.lastResetTime && battery.resetErrorLog">
										<div class="col-4 label-text"
											role="text"
											id="batterySettings-gaugeReset-lastReset-title-{{i+1}}">
											{{ 'device.deviceSettings.power.batterySettings.gaugeReset.lastReset' | translate}}
										</div>
										<div class="col-8 label-value"
											*ngIf="is12HrsFormat"
											id="batterySettings-battery-lastResetTime-value-12hrs-{{i+1}}"
											role="text">
											{{battery.lastResetTime | date : 'M/d/yyyy h:mm:ss '}}
											{{ lastResetTimeAbbreviated[i] | translate}}
											<br *ngIf="battery.lastResetTime">
											{{'device.deviceSettings.power.batterySettings.gaugeReset.resetLog.' + battery.resetErrorLog | translate}}
										</div>
										<div class="col-8 label-value"
											*ngIf="!is12HrsFormat"
											id="batterySettings-battery-lastResetTime-value-not12hrs-{{i+1}}"
											role="text">
											{{battery.lastResetTime | date : 'M/d/yyyy H:mm:ss '}}
											<br>
											{{'device.deviceSettings.power.batterySettings.gaugeReset.resetLog.' + battery.resetErrorLog | translate}}
										</div>
									</div>
									<div class="row"
										*ngIf="battery.FCCBefore && battery.FCCAfter">
										<div class="col-4 label-text"
											id="BattergaugeReset-fullChargeCapacity-title-{{i+1}}"
											role="text">
											{{ 'device.deviceSettings.power.batterySettings.gaugeReset.fullChargeCapacity' | translate}}
										</div>
										<div class="col-8 label-value"
											role="text"
											id="BattergaugeReset-fullChargeCapacity-value-{{i+1}}"
											[innerHTML]="'device.deviceSettings.power.batterySettings.gaugeReset.FCCText' | translate: { before: battery.FCCBefore, after: battery.FCCAfter } ">
										</div>
									</div>
								</div>

								<div class="col-lg-8 col-md-8 col-sm-12 battery-gauge-btn"
									[class.stop-btn]="battery.isResetRunning"
									[class.disabled-btn]="(batteryService.isGaugeResetRunning &&
										(batteryService.gaugeResetInfo.length > 1 && !battery.isResetRunning)) ||
										!batteryService.isAcAttached">
									<vtr-ui-button [isRegular]="true"
										[metricsItem]="'btn.battery-gauge-reset'"
										[metricsParent]="metricsParent"
										[metricsEvent]="metricsType"
										[autoFocus]="autoFocusButton"
										[isDisabled]="(batteryService.isGaugeResetRunning &&
											(batteryService.gaugeResetInfo.length > 1 && !battery.isResetRunning)) ||
											!batteryService.isAcAttached"
										[tabIndex]="((batteryService.isGaugeResetRunning &&
											(batteryService.gaugeResetInfo.length > 1 && !battery.isResetRunning)) ||
											!batteryService.isAcAttached)?-1:0"
										linkId="myDevice-settings-battery-gauge-reset-stop-btn{{i+1}}"
										[label]="battery.isResetRunning? ('device.deviceSettings.power.batterySettings.gaugeReset.btnLabel.stop'|translate): ('device.deviceSettings.power.batterySettings.gaugeReset.btnLabel.reset' | translate)"
										(keyup)="onKeyPressBatteryGaugeReset(i,$event)"
										(onClick)="onBatteryGaugeReset(i,$event)"></vtr-ui-button>
								</div>
							</div>
						</div>
					</div>
					<div class="row px-5 pt-3">
						<span *ngIf="!batteryService.isAcAttached"
							class="note warning-note"
							role="text"
							id="gaugeReset-warning-note">
							{{'device.deviceSettings.power.batterySettings.gaugeReset.note' | translate}}
						</span>
						<span *ngIf="batteryService.isAcAttached && batteryService.gaugeResetInfo?.length>1"
							class="note"
							role="text"
							id="gaugeReset-warning-dual_note">
							{{'device.deviceSettings.power.batterySettings.gaugeReset.dual_note' | translate}}
						</span>
					</div>
				</div>
			</div>
		</vtr-ui-row-switch>
	</div>
</div>
