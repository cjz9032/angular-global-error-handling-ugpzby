<div class="trackers-page"
	 data-analyticsName="VisibleToOnlineTrackers.WebsiteTrackersBlock"
	 vtrSendAnalytics
	 [metricsEvent]="'PageView'">
	<div class="trackers-page__header">
		<vtr-feature-header
			[texts]="textForFeatureHeader"
			[isFeatureWasScanned]="(isWebsiteTrackersWasScanned$ | async) && (isConsentGiven$ | async)"
			[countOfIssue]="websiteTrackersCount$ | async"
			[isFigleafReadyToCommunication]="isFigleafReadyForCommunication$ | async">
			<span class="trackers-page__title--red">{{websiteTrackersCount$ | async}}</span> tracking tools found
		</vtr-feature-header>
		<button class="trackers-concent__btn"
				vtrSendAnalytics
				[metricsEvent]="'ItemClick'"
				[metricsItem]="'ViewInLenovoPrivacyEssentialsButton'"
				*ngIf="(isFigleafReadyForCommunication$ | async) && (websiteTrackersCount$ | async) > 0 && (isConsentGiven$ | async)"
				(click)="openFigleafApp()">
			Block in the app
		</button>
		<vtr-why-seeing-tooltip
			[contextText]="textForTooltip"
			*ngIf="!(isFigleafReadyForCommunication$ | async) && (websiteTrackersCount$ | async) > 0 && (isConsentGiven$ | async)">
		</vtr-why-seeing-tooltip>

	</div>
	<div class="trackers-concent"
		 *ngIf="!(isConsentGiven$ | async) && !(isTrackersBlocked$ | async)">
		<div class="trackers-concent__text-wrapper">
			<p class="trackers-concent__text">
				Show me what tracking tools are collecting information about me.
			</p>
		</div>
		<div class="trackers-concent__btn-wrapper">
			<vtr-ab-tests [testName]="currentTests.PrimaryButtonPitch">
				<button class="trackers-concent__btn"
						*testOption="'Secondary'"
						vtrSendAnalytics
						[metricsEvent]="'ItemClick'"
						[metricsItem]="'WebsiteTrackersAcceptAndScanButton'"
						[metricsParam]="{Test: 'PrimaryButtonPitch', Variant: 'Secondary'}"
						(click)="giveConcent()">
					Accept & scan
				</button>
				<button class="trackers-concent__btn trackers-concent__btn--transparent"
						*testOption="'Primary'"
						vtrSendAnalytics
						[metricsEvent]="'ItemClick'"
						[metricsItem]="'WebsiteTrackersAcceptAndScanButton'"
						[metricsParam]="{Test: 'PrimaryButtonPitch', Variant: 'Primary'}"
						(click)="giveConcent()">
					Accept & scan
				</button>
			</vtr-ab-tests>

		</div>
	</div>

	<div>
		<vtr-tracking-map [animate]="true"></vtr-tracking-map>
		<vtr-try-product-block
			*ngIf="(websiteTrackersCount$ | async) && (isConsentGiven$ | async)"
			[isFigleafReadyToCommunication]="isFigleafReadyForCommunication$ | async"
			[texts]="tryProductText">
		</vtr-try-product-block>
		<div class="trackers-page__clear-data-wrapper" *ngIf="(websiteTrackersCount$ | async) && (isConsentGiven$ | async)">
			<vtr-clear-data-tooltip [feature]="trackersFeatureName"></vtr-clear-data-tooltip>
		</div>
	</div>

</div>
