<section class="result-page"
		 vtrSendAnalytics
		 [metricsEvent]="'PageView'">

	<div class="result-page__score">
		<vtr-privacy-score></vtr-privacy-score>
	</div>

	<div *ngIf="(onGetBreachedAccountsCompleted$ | async) || (isWasScanned | async)" data-analyticsName="BreachedAccountsBlock">
		<div *ngIf="!(isFigleafReadyForCommunication$ | async) && !breached_accounts.length" class="email-scanner">
			<vtr-email-scanner></vtr-email-scanner>
		</div>

		<div *ngIf="breached_accounts.length" class="breaches-block breaches-block__wrapper">
			<div class="breaches-block__title-row">
				<h3 class="breaches-block__title">{{breached_accounts.length}} breached accounts</h3>
				<button *ngIf="(isFigleafReadyForCommunication$ | async)" class="breaches-block__btn-to-fl" (click)="openFigleafApp()">Fix in Lenovo Privacy</button>
			</div>
			<p class="breaches-block__text">
				Looks like some of your personal info is floating around online, making it easy for others to access your
				accounts without your knowledge. You should change your passwords right now.
			</p>
			<div class="breaches-block__accounts-row">
				<div class="breaches-block__accounts-container">
					<vtr-breached-account
							[mode]="breachedAccountMode.PREVIEW"
							[breachedAccounts]="breached_accounts_show"
							(detailClick)="redirectToDetailPage($event)">
					</vtr-breached-account>
				</div>
				<div *ngIf="breached_accounts.length > 3" class="breaches-block__see-more more-breaches">
					<div class="more-breaches__number">
						+{{breached_accounts.length - 3}}
					</div>
					<span class="more-breaches__description">breached accounts</span>
					<a routerLink="./breaches"
					   class="more-breaches__btn"
					   vtrSendAnalytics
					   [metricsEvent]="'ItemClick'"
					   [metricsItem]="'BreachedAccountsShowAllButton'"
					>Show All</a>
				</div>
			</div>
		</div>

		<div *ngIf="(isFigleafReadyForCommunication$ | async) && breached_accounts.length === 0" class="privacy-dashboard">
			<h2 class="privacy-dashboard__title">Privacy control at a glance</h2>
		</div>
	</div>
	<div class="breaches-block breaches-block__wrapper"
		 *ngIf="!(isFigleafReadyForCommunication$ | async) && !(isWasScanned | async) && !(onGetBreachedAccountsCompleted$ | async)">
		<vtr-big-loader [text]="textForLoader"></vtr-big-loader>
	</div>

	<div class="privacy-tracking-map">
		<vtr-tracking-map></vtr-tracking-map>
	</div>

	<vtr-non-private-password [browserStoredAccountsData]="browserStoredAccountsData"></vtr-non-private-password>

</section>
