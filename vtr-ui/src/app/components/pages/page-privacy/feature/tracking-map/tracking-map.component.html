<div class="trackers" data-analyticsName="WebsiteTrackersBlock">
	<ng-container *ngIf="!isUserData">
		<p class="trackers__title">Check for tracking tools</p>
		<p class="trackers__text" *ngIf="animate && !(isFigleafInstalled$ | async)">
			Some websites use tracking tools to collect information about you.
			They may share it with third-party partners without notifying you.
		</p>
		<p class="trackers__text" *ngIf="!animate && (isFigleafInstalled$ | async)">
			Lenovo Privacy by FigLeaf has blocked trackers on sites within the green bubble below, keeping you private while you do the things you love online.
		</p>
	</ng-container>
	<ng-container *ngIf="isUserData">
		<p class="trackers__title">
			<span class="trackers__title--red">{{websiteTrackersCount$ | async}}</span> tracking tools found
		</p>
	</ng-container>
	<div class="trackers-concent"
		 *ngIf="!(isConsentGiven$ | async)">
		<div class="trackers-concent__text-wrapper">
			<p class="trackers-concent__text">
				Show me what tracking tools are collecting information about me.
			</p>
		</div>
		<div class="trackers-concent__btn-wrapper">
			<button class="trackers-concent__btn"
					vtrSendAnalytics
					[metricsEvent]="'ItemClick'"
					[metricsItem]="'WebsiteTrackersPermissionToAccessButton'"
					(click)="giveConcent()">
				Accept & scan
			</button>
		</div>
	</div>
	<div class="trackers__wrapper" *ngIf="(trackingData$ | async) as trackingData; else loader">
		<ng-container *ngIf="trackingData?.sites.length > 0">
			<fl-tracking-map [trackers]="trackingData"
							 [labels]="getText()"
							 [positive]="isTrackersBlocked$ | async"
							 [animate]="animate"
							 [defaultSiteIcon]="defaultIcon.site"
							 [defaultTrackerIcon]="defaultIcon.tracker"
							 (showDetails)="showDetails($event, trackingData); sendAnalytics()">
			</fl-tracking-map>
		</ng-container>

		<div class="history-clean"
			 *ngIf="isUserData && trackingData?.sites.length <= 0">
			<img src="/assets/images/privacy-tab/privacy-search-completed.png"
				 srcset="/assets/images/privacy-tab/privacy-search-completed@2x.png 2x"
				 alt="search completed"
				 class="history-clean__img">
			<span class="history-clean__bold-text">Your browser history is clean.</span>
			<span class="history-clean__text">We cannot compile a tracking map, as there is no data. You could clear the browser history, or you had a new PC.
Use your browser to view websites, and come back here later, then we can show whoâ€™s tracking you...</span>
		</div>
	</div>

	<vtr-try-product-block
		*ngIf="isUserData && !(isFigleafInstalled$ | async)"
		[texts]="tryProductText">
	</vtr-try-product-block>

	<ng-template #loader>
		<vtr-big-loader [text]="textForLoader"></vtr-big-loader>
	</ng-template>

	<vtr-common-popup [popUpId]="trackingMapSinglePopupId" size="large">
		<ng-template>
			<vtr-single-tracker-detail
				[percentOfTrack]="percentOfTrack"
				[popUpId]="trackingMapSinglePopupId">
			</vtr-single-tracker-detail>
		</ng-template>
	</vtr-common-popup>
</div>
